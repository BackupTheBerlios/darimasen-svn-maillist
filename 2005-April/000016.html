<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Darimasen-svn] r63 - in trunk: pixmaps src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/darimasen-svn/2005-April/index.html" >
   <LINK REL="made" HREF="mailto:darimasen-svn%40lists.berlios.de?Subject=Re%3A%20%5BDarimasen-svn%5D%20r63%20-%20in%20trunk%3A%20pixmaps%20src&In-Reply-To=%3C200504270537.j3R5bRgn017008%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000015.html">
   <LINK REL="Next"  HREF="000017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Darimasen-svn] r63 - in trunk: pixmaps src</H1>
    <B>darimasen-svn-admin at lists.berlios.de</B> 
    <A HREF="mailto:darimasen-svn%40lists.berlios.de?Subject=Re%3A%20%5BDarimasen-svn%5D%20r63%20-%20in%20trunk%3A%20pixmaps%20src&In-Reply-To=%3C200504270537.j3R5bRgn017008%40sheep.berlios.de%3E"
       TITLE="[Darimasen-svn] r63 - in trunk: pixmaps src">darimasen-svn-admin at lists.berlios.de
       </A><BR>
    <I>Wed Apr 27 07:37:27 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000015.html">[Darimasen-svn] r62 - in trunk: . pixmaps src
</A></li>
        <LI>Next message: <A HREF="000017.html">[Darimasen-svn] r64 - in trunk: . src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16">[ date ]</a>
              <a href="thread.html#16">[ thread ]</a>
              <a href="subject.html#16">[ subject ]</a>
              <a href="author.html#16">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sudrien
Date: 2005-04-27 07:37:08 +0200 (Wed, 27 Apr 2005)
New Revision: 63

Modified:
   trunk/pixmaps/darimasenInfo.svg
   trunk/src/darimasen.cpp
   trunk/src/iconmodes.cpp
   trunk/src/iconmodes.h
Log:
menus filled in with non-iconview system

Modified: trunk/pixmaps/darimasenInfo.svg
===================================================================
--- trunk/pixmaps/darimasenInfo.svg	2005-04-26 06:46:36 UTC (rev 62)
+++ trunk/pixmaps/darimasenInfo.svg	2005-04-27 05:37:08 UTC (rev 63)
@@ -2,121 +2,174 @@
 &lt;!-- Created with Inkscape (<A HREF="http://www.inkscape.org/">http://www.inkscape.org/</A>) --&gt;
 &lt;svg
    xmlns:xml=&quot;<A HREF="http://www.w3.org/XML/1998/namespace">http://www.w3.org/XML/1998/namespace</A>&quot;
+   xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;
+   xmlns:cc=&quot;<A HREF="http://web.resource.org/cc/">http://web.resource.org/cc/</A>&quot;
+   xmlns:rdf=&quot;<A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>&quot;
    xmlns:svg=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot;
    xmlns=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot;
    xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink">http://www.w3.org/1999/xlink</A>&quot;
-   id=&quot;svg1275&quot;
+   xmlns:sodipodi=&quot;<A HREF="http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd">http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd</A>&quot;
+   xmlns:inkscape=&quot;<A HREF="http://www.inkscape.org/namespaces/inkscape">http://www.inkscape.org/namespaces/inkscape</A>&quot;
+   sodipodi:docbase=&quot;/home/sudrien/trunk/pixmaps&quot;
+   sodipodi:docname=&quot;darimasenInfo.svg&quot;
+   inkscape:version=&quot;0.41+cvs&quot;
+   sodipodi:version=&quot;0.32&quot;
+   version=&quot;1.0&quot;
+   x=&quot;0.0000000&quot;
+   y=&quot;0.0000000&quot;
+   width=&quot;198.00000&quot;
    height=&quot;256.00000&quot;
-   width=&quot;198.00000&quot;
-   y=&quot;0.0000000&quot;
-   x=&quot;0.0000000&quot;
-   version=&quot;1.0&quot;&gt;
+   id=&quot;svg1275&quot;&gt;
+  &lt;metadata
+     id=&quot;metadata27&quot;&gt;
+    &lt;rdf:RDF
+       id=&quot;RDF29&quot;&gt;
+      &lt;cc:Work
+         id=&quot;Work31&quot;
+         rdf:about=&quot;&quot;&gt;
+        &lt;dc:format
+           id=&quot;format33&quot;&gt;image/svg+xml&lt;/dc:format&gt;
+        &lt;dc:type
+           rdf:resource=&quot;<A HREF="http://purl.org/dc/dcmitype/StillImage">http://purl.org/dc/dcmitype/StillImage</A>&quot;
+           id=&quot;type35&quot; /&gt;
+      &lt;/cc:Work&gt;
+    &lt;/rdf:RDF&gt;
+  &lt;/metadata&gt;
+  &lt;sodipodi:namedview
+     inkscape:current-layer=&quot;svg1275&quot;
+     inkscape:window-y=&quot;23&quot;
+     inkscape:window-x=&quot;5&quot;
+     inkscape:cy=&quot;56.734489&quot;
+     inkscape:cx=&quot;104.06554&quot;
+     inkscape:zoom=&quot;1.3398437&quot;
+     id=&quot;base&quot;
+     pagecolor=&quot;#ffffff&quot;
+     bordercolor=&quot;#666666&quot;
+     borderopacity=&quot;1.0&quot;
+     inkscape:pageopacity=&quot;0.0&quot;
+     inkscape:pageshadow=&quot;2&quot;
+     inkscape:window-width=&quot;742&quot;
+     inkscape:window-height=&quot;512&quot; /&gt;
   &lt;defs
      id=&quot;defs3&quot;&gt;
     &lt;linearGradient
        id=&quot;linearGradient2049&quot;&gt;
       &lt;stop
-         id=&quot;stop2051&quot;
+         style=&quot;stop-color:#b8b8b8;stop-opacity:1.0000000;&quot;
          offset=&quot;0.0000000&quot;
-         style=&quot;stop-color:#b8b8b8;stop-opacity:1.0000000;&quot; /&gt;
+         id=&quot;stop2051&quot; /&gt;
       &lt;stop
-         id=&quot;stop2053&quot;
+         style=&quot;stop-color:#ffffff;stop-opacity:1.0000000;&quot;
          offset=&quot;1.0000000&quot;
-         style=&quot;stop-color:#ffffff;stop-opacity:1.0000000;&quot; /&gt;
+         id=&quot;stop2053&quot; /&gt;
     &lt;/linearGradient&gt;
     &lt;linearGradient
        id=&quot;linearGradient2439&quot;&gt;
       &lt;stop
-         id=&quot;stop2441&quot;
+         style=&quot;stop-color:#002200;stop-opacity:1.0000000;&quot;
          offset=&quot;0.0000000&quot;
-         style=&quot;stop-color:#002200;stop-opacity:1.0000000;&quot; /&gt;
+         id=&quot;stop2441&quot; /&gt;
       &lt;stop
-         id=&quot;stop2443&quot;
+         style=&quot;stop-color:#508350;stop-opacity:1.0000000;&quot;
          offset=&quot;1.0000000&quot;
-         style=&quot;stop-color:#508350;stop-opacity:1.0000000;&quot; /&gt;
+         id=&quot;stop2443&quot; /&gt;
     &lt;/linearGradient&gt;
     &lt;linearGradient
-       gradientTransform=&quot;matrix(0.632356,0.000000,0.000000,0.632356,-13.67091,-184.4702)&quot;
+       x1=&quot;129.06119&quot;
+       y1=&quot;330.76971&quot;
+       x2=&quot;129.66743&quot;
+       y2=&quot;444.66751&quot;
+       id=&quot;linearGradient3207&quot;
+       xlink:href=&quot;#linearGradient2439&quot;
        gradientUnits=&quot;userSpaceOnUse&quot;
-       xlink:href=&quot;#linearGradient2439&quot;
-       id=&quot;linearGradient3207&quot;
+       gradientTransform=&quot;matrix(0.632356,0.000000,0.000000,0.632356,-13.67091,-184.4702)&quot; /&gt;
+    &lt;linearGradient
+       x1=&quot;29.854227&quot;
+       y1=&quot;70.903793&quot;
+       x2=&quot;141.06122&quot;
+       y2=&quot;194.05247&quot;
+       id=&quot;linearGradient2057&quot;
+       xlink:href=&quot;#linearGradient2049&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot; /&gt;
+    &lt;linearGradient
        y2=&quot;444.66751&quot;
        x2=&quot;129.66743&quot;
        y1=&quot;330.76971&quot;
-       x1=&quot;129.06119&quot; /&gt;
-    &lt;linearGradient
+       x1=&quot;129.06119&quot;
+       gradientTransform=&quot;matrix(0.632356,0.000000,0.000000,0.632356,-13.67091,-184.4702)&quot;
        gradientUnits=&quot;userSpaceOnUse&quot;
-       xlink:href=&quot;#linearGradient2049&quot;
-       id=&quot;linearGradient2057&quot;
-       y2=&quot;194.05247&quot;
-       x2=&quot;141.06122&quot;
-       y1=&quot;70.903793&quot;
-       x1=&quot;29.854227&quot; /&gt;
+       id=&quot;linearGradient2461&quot;
+       xlink:href=&quot;#linearGradient2439&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
   &lt;/defs&gt;
   &lt;rect
-     id=&quot;rect1287&quot;
+     width=&quot;198.00000&quot;
+     height=&quot;256.00000&quot;
+     rx=&quot;0.0000000&quot;
+     ry=&quot;0.0000000&quot;
+     x=&quot;0.0000000&quot;
+     y=&quot;-5.3400210e-15&quot;
      style=&quot;fill:url(#linearGradient2057);fill-opacity:1.0000000;stroke:#000000;stroke-opacity:1.0000000&quot;
-     y=&quot;-5.3400210e-15&quot;
-     x=&quot;0.0000000&quot;
-     ry=&quot;0.0000000&quot;
-     rx=&quot;0.0000000&quot;
-     height=&quot;256.00000&quot;
-     width=&quot;198.00000&quot; /&gt;
+     id=&quot;rect1287&quot; /&gt;
   &lt;g
-     id=&quot;layer1&quot;
-     transform=&quot;matrix(1.133614,0.000000,0.000000,1.133614,-4.525046,-12.88697)&quot;&gt;
+     transform=&quot;matrix(1.133614,0.000000,0.000000,1.133614,3.474954,-2.886970)&quot;
+     id=&quot;layer1&quot;&gt;
     &lt;rect
-       id=&quot;rect2843&quot;
+       width=&quot;109.67054&quot;
+       height=&quot;21.277554&quot;
+       x=&quot;9.1647301&quot;
+       y=&quot;86.580460&quot;
        style=&quot;fill:#ffffff;fill-opacity:1.0000000;fill-rule:evenodd;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000&quot;
-       y=&quot;86.580460&quot;
-       x=&quot;9.1647301&quot;
-       height=&quot;21.277554&quot;
-       width=&quot;109.67054&quot; /&gt;
+       id=&quot;rect2843&quot; /&gt;
     &lt;path
-       id=&quot;rect1347&quot;
-       style=&quot;fill:url(#linearGradient3207);fill-opacity:1.0000000;fill-rule:evenodd;stroke:none;stroke-width:8.8750000;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4.0000000;stroke-opacity:0.79591835&quot;
-       d=&quot;M -0.23325339,5.0000000 C -0.23325339,5.0000000 -0.23325339,15.512950 -0.23325339,20.137066 C 38.452555,20.192437 77.138362,20.256287 115.82418,20.314918 C 115.51692,27.421160 117.36607,37.396096 109.67846,41.281537 C 105.06085,45.348432 98.730022,44.236576 93.612606,41.874370 C 85.689412,38.583788 77.600479,33.142630 74.819717,24.603095 C 70.986421,24.067457 67.705354,24.306829 67.270941,28.871510 C 63.481078,36.173460 52.735150,38.563150 46.778601,32.487807 C 42.861760,30.675502 44.858595,25.544170 42.569475,23.061721 C 40.139803,22.670295 35.174287,21.275660 35.257832,24.958794 C 35.013503,32.896507 39.107446,41.206533 46.818119,44.146905 C 53.749888,47.396083 62.098151,46.619711 68.160204,41.874370 C 71.117109,38.996307 73.611001,37.842368 76.262283,41.894131 C 85.089190,50.781777 98.558889,56.168480 110.88388,52.248993 C 115.73922,49.990940 120.41084,46.526704 123.39272,42.052221 C 125.87305,36.292010 128.61715,30.440652 128.19468,23.950976 C 128.09807,17.633!
 769 128.25469,11.317184 128.15667,5.0000000 C 85.446161,5.0000000 42.477251,5.0000000 -0.23325339,5.0000000 z M 12.216279,26.203750 C 10.487101,26.185153 8.2227922,26.687581 6.8214890,26.342081 C 4.8876683,26.960152 -0.41947891,24.985742 -0.23325339,27.606795 C -0.23325339,59.718722 -0.23325339,91.830663 -0.23325339,123.94256 C 42.483834,123.94256 85.200922,123.94256 127.91803,123.94256 C 127.91803,102.00106 127.91803,80.059561 127.91803,58.118067 C 122.98432,58.118067 118.05061,58.118067 113.11690,58.118067 C 113.61470,61.902451 113.93451,66.093579 112.04979,69.520271 C 79.819297,69.520271 47.588806,69.520271 15.358315,69.520271 C 13.263154,56.236554 14.647417,42.637905 14.390014,29.227212 C 15.132456,26.761238 13.945475,26.222349 12.216279,26.203750 z M 86.696194,91.988724 C 88.697720,92.102224 90.594970,92.887462 90.865799,95.249324 C 89.764681,95.483360 88.480005,95.220441 87.348303,95.624798 C 88.012730,94.785614 86.526138,93.870435 85.708122,94.043891 C 84.396466,94.1!
 44609 84.394166,95.366120 85.609335,95.723605 C 86.955285,95.8!
 45307 88
.191464,96.205103 89.423232,96.830209 C 92.034350,98.071779 91.529538,102.13231 88.869926,102.97595 C 86.862058,103.67131 84.221920,103.84674 82.487068,102.42264 C 81.828004,101.87174 80.313684,99.694347 81.637323,99.577031 C 82.839866,99.657548 84.424058,98.813904 84.720071,100.38723 C 85.294536,101.75947 87.957298,101.54654 87.743533,99.912973 C 86.590043,98.140560 84.045058,98.854062 82.585855,97.403299 C 80.286295,95.733835 82.159213,92.076397 84.720071,92.067794 C 85.353695,91.990995 86.029022,91.950897 86.696194,91.988724 z M 50.177519,92.067794 C 50.951303,92.105038 51.897906,92.331175 52.450062,92.146824 C 52.450062,95.535778 52.450062,98.934902 52.450062,102.32383 C 52.850242,104.19702 50.115913,102.92341 49.011604,103.29213 C 49.011604,99.903181 49.011604,96.523836 49.011604,93.134883 C 48.811524,92.198299 49.403754,92.030510 50.177519,92.067794 z M 101.91230,92.067794 C 102.32993,92.246095 102.12056,93.086725 102.14943,93.609164 C 102.47996,95.146315 100.33914,94.!
 367268 99.461914,94.498416 C 98.479889,94.643432 96.337885,93.995332 96.517491,95.585262 C 97.254816,97.014358 99.102365,96.144302 100.37093,96.296675 C 101.94385,95.617884 102.02092,97.482450 101.63565,98.470408 C 100.52840,98.782831 99.220108,98.516516 98.039115,98.529681 C 96.681725,98.206023 95.898835,99.589617 96.438454,100.76271 C 98.151905,100.76271 99.862911,100.76271 101.57637,100.76271 C 103.02863,100.55480 102.06485,102.43578 102.30753,103.29213 C 99.181795,103.29213 96.046695,103.29213 92.920959,103.29213 C 92.920959,99.579239 92.920959,95.859738 92.920959,92.146824 C 95.699738,92.141679 98.482466,92.164653 101.26020,92.146824 C 101.57071,92.017566 101.77309,92.008361 101.91230,92.067794 z M 29.210913,92.087531 C 29.993356,92.141076 30.858512,92.320703 31.483435,92.146824 C 32.566789,95.025921 33.660694,97.903369 34.744029,100.78246 C 35.463049,102.33476 36.183091,103.90380 33.775746,103.29213 C 32.328321,103.73625 31.925970,102.90173 31.384629,101.73099 C 30.10!
 9115,101.16954 27.661195,101.03318 27.116216,102.73882 C 26.76!
 5126,103
.98245 24.634598,102.95515 23.559201,103.29213 C 24.868338,99.806680 26.182555,96.323930 27.491673,92.838480 C 27.736522,92.115811 28.428448,92.034007 29.210913,92.087531 z M 74.128085,92.087531 C 74.909492,92.141397 75.777281,92.321185 76.400610,92.146824 C 77.627816,95.404710 78.848976,98.670737 80.076199,101.92860 C 81.114860,103.46841 80.062904,103.43307 78.692922,103.27236 C 77.248702,103.74706 76.843666,102.89011 76.301803,101.73099 C 75.026289,101.16954 72.578385,101.03318 72.033388,102.73882 C 71.686099,103.98405 69.548381,102.95410 68.476375,103.29213 C 69.785493,99.806680 71.099749,96.323930 72.408849,92.838480 C 72.651896,92.115048 73.346682,92.033686 74.128085,92.087531 z M 113.07738,92.107309 C 113.68543,92.149477 114.34399,92.264244 114.85589,92.166602 C 114.85589,95.836482 114.85587,99.503694 114.85589,103.17355 C 113.80569,103.50109 112.67686,103.18767 111.59529,103.29213 C 110.20570,101.25479 108.81913,99.200878 107.42567,97.166169 C 107.42567,99.087153 107.!
 42567,101.01543 107.42567,102.93642 C 106.83190,103.76151 105.22577,103.07726 104.20459,103.27236 C 104.20459,100.97934 104.20459,98.688526 104.20459,96.395483 C 104.45098,95.058823 103.70136,93.010609 104.59983,92.146824 C 105.54300,92.080296 106.48285,92.227020 107.42567,92.166602 C 108.82286,94.214052 110.21459,96.267089 111.61505,98.312328 C 111.61505,96.381192 111.61505,94.433656 111.61505,92.502541 C 111.91313,92.089843 112.46933,92.065141 113.07738,92.107309 z M 17.472762,92.127067 C 18.869098,92.142644 20.247220,92.298774 21.504042,92.937288 C 23.926501,94.879196 24.174297,98.892231 22.531630,101.41482 C 20.328928,104.23001 16.379914,103.04626 13.303155,103.29213 C 13.308218,99.584473 13.285426,95.873344 13.303155,92.166602 C 14.653722,92.240245 16.076428,92.111470 17.472762,92.127067 z M 41.166427,92.127067 C 42.630747,92.119750 44.093158,92.191484 45.434841,92.621086 C 47.614491,93.947435 47.093750,97.525040 44.703673,98.332065 C 45.959604,99.639304 46.779601,101.!
 24559 47.569037,102.85739 C 47.759643,103.86795 44.884948,103.!
 00514 43
.893466,103.29213 C 42.970229,101.43530 41.999814,99.593076 40.514297,98.114711 C 40.317368,99.507204 40.211776,100.91672 40.277164,102.32383 C 40.689397,104.19602 37.923247,102.92394 36.818957,103.29213 C 36.818957,99.579239 36.818957,95.859738 36.818957,92.146824 C 38.221301,92.216588 39.702088,92.134383 41.166427,92.127067 z M 54.880680,92.146824 C 56.389138,92.146824 57.897556,92.146824 59.405994,92.146824 C 59.987728,94.396955 60.557187,96.656592 61.144983,98.905155 C 61.733985,96.657557 62.304909,94.396975 62.883969,92.146824 C 64.389885,92.146824 65.903352,92.146824 67.409268,92.146824 C 67.409268,95.292798 67.409268,98.446692 67.409268,101.59267 C 68.110669,103.79747 66.105657,103.29123 64.603190,103.29213 C 64.490603,101.30864 64.887521,99.268467 64.286999,97.344027 C 63.304419,98.835471 63.192242,100.67284 62.666589,102.34361 C 62.658707,103.97971 60.873486,103.09944 59.860511,103.27236 C 59.233621,101.30538 59.122742,99.145583 58.022715,97.363764 C 57.453594,99.10!
 2228 57.798935,100.94269 57.706525,102.73882 C 57.576637,104.00630 55.758778,102.99523 54.880680,103.27236 C 54.880680,99.567047 54.880680,95.852120 54.880680,92.146824 z M 86.518347,95.605040 C 86.678148,95.557907 87.024159,95.903393 86.459060,95.822393 C 86.429221,95.693617 86.465069,95.620738 86.518347,95.605040 z M 86.518347,98.984206 C 86.722712,99.041387 86.531275,99.465725 86.162641,99.102750 C 86.321159,99.002797 86.450214,98.965131 86.518347,98.984206 z M 67.547613,105.01135 C 67.698176,104.95354 67.830329,105.55843 67.409268,105.34728 C 67.443037,105.12717 67.497411,105.03064 67.547613,105.01135 z M 36.562074,105.24849 C 36.680632,105.14896 37.027939,105.65251 36.562074,105.58444 C 36.514043,105.36965 36.522535,105.28166 36.562074,105.24849 z &quot; /&gt;
+       d=&quot;M -0.23325339,5.0000000 C -0.23325339,5.0000000 -0.23325339,15.512950 -0.23325339,20.137066 C 38.452555,20.192437 77.138362,20.256287 115.82418,20.314918 C 115.51692,27.421160 117.36607,37.396096 109.67846,41.281537 C 105.06085,45.348432 98.730022,44.236576 93.612606,41.874370 C 85.689412,38.583788 77.600479,33.142630 74.819717,24.603095 C 70.986421,24.067457 67.705354,24.306829 67.270941,28.871510 C 63.481078,36.173460 52.735150,38.563150 46.778601,32.487807 C 42.861760,30.675502 44.858595,25.544170 42.569475,23.061721 C 40.139803,22.670295 35.174287,21.275660 35.257832,24.958794 C 35.013503,32.896507 39.107446,41.206533 46.818119,44.146905 C 53.749888,47.396083 62.098151,46.619711 68.160204,41.874370 C 71.117109,38.996307 73.611001,37.842368 76.262283,41.894131 C 85.089190,50.781777 98.558889,56.168480 110.88388,52.248993 C 115.73922,49.990940 120.41084,46.526704 123.39272,42.052221 C 125.87305,36.292010 128.61715,30.440652 128.19468,23.950976 C 128.09807,17.633!
 769 128.25469,11.317184 128.15667,5.0000000 C 85.446161,5.0000000 42.477251,5.0000000 -0.23325339,5.0000000 z M 12.216279,26.203750 C 10.487101,26.185153 8.2227922,26.687581 6.8214890,26.342081 C 4.8876683,26.960152 -0.41947891,24.985742 -0.23325339,27.606795 C -0.23325339,59.718722 -0.23325339,91.830663 -0.23325339,123.94256 C 42.483834,123.94256 85.200922,123.94256 127.91803,123.94256 C 127.91803,102.00106 127.91803,80.059561 127.91803,58.118067 C 122.98432,58.118067 118.05061,58.118067 113.11690,58.118067 C 113.61470,61.902451 113.93451,66.093579 112.04979,69.520271 C 79.819297,69.520271 47.588806,69.520271 15.358315,69.520271 C 13.263154,56.236554 14.647417,42.637905 14.390014,29.227212 C 15.132456,26.761238 13.945475,26.222349 12.216279,26.203750 z M 86.696194,91.988724 C 88.697720,92.102224 90.594970,92.887462 90.865799,95.249324 C 89.764681,95.483360 88.480005,95.220441 87.348303,95.624798 C 88.012730,94.785614 86.526138,93.870435 85.708122,94.043891 C 84.396466,94.1!
 44609 84.394166,95.366120 85.609335,95.723605 C 86.955285,95.8!
 45307 88
.191464,96.205103 89.423232,96.830209 C 92.034350,98.071779 91.529538,102.13231 88.869926,102.97595 C 86.862058,103.67131 84.221920,103.84674 82.487068,102.42264 C 81.828004,101.87174 80.313684,99.694347 81.637323,99.577031 C 82.839866,99.657548 84.424058,98.813904 84.720071,100.38723 C 85.294536,101.75947 87.957298,101.54654 87.743533,99.912973 C 86.590043,98.140560 84.045058,98.854062 82.585855,97.403299 C 80.286295,95.733835 82.159213,92.076397 84.720071,92.067794 C 85.353695,91.990995 86.029022,91.950897 86.696194,91.988724 z M 50.177519,92.067794 C 50.951303,92.105038 51.897906,92.331175 52.450062,92.146824 C 52.450062,95.535778 52.450062,98.934902 52.450062,102.32383 C 52.850242,104.19702 50.115913,102.92341 49.011604,103.29213 C 49.011604,99.903181 49.011604,96.523836 49.011604,93.134883 C 48.811524,92.198299 49.403754,92.030510 50.177519,92.067794 z M 101.91230,92.067794 C 102.32993,92.246095 102.12056,93.086725 102.14943,93.609164 C 102.47996,95.146315 100.33914,94.!
 367268 99.461914,94.498416 C 98.479889,94.643432 96.337885,93.995332 96.517491,95.585262 C 97.254816,97.014358 99.102365,96.144302 100.37093,96.296675 C 101.94385,95.617884 102.02092,97.482450 101.63565,98.470408 C 100.52840,98.782831 99.220108,98.516516 98.039115,98.529681 C 96.681725,98.206023 95.898835,99.589617 96.438454,100.76271 C 98.151905,100.76271 99.862911,100.76271 101.57637,100.76271 C 103.02863,100.55480 102.06485,102.43578 102.30753,103.29213 C 99.181795,103.29213 96.046695,103.29213 92.920959,103.29213 C 92.920959,99.579239 92.920959,95.859738 92.920959,92.146824 C 95.699738,92.141679 98.482466,92.164653 101.26020,92.146824 C 101.57071,92.017566 101.77309,92.008361 101.91230,92.067794 z M 29.210913,92.087531 C 29.993356,92.141076 30.858512,92.320703 31.483435,92.146824 C 32.566789,95.025921 33.660694,97.903369 34.744029,100.78246 C 35.463049,102.33476 36.183091,103.90380 33.775746,103.29213 C 32.328321,103.73625 31.925970,102.90173 31.384629,101.73099 C 30.10!
 9115,101.16954 27.661195,101.03318 27.116216,102.73882 C 26.76!
 5126,103
.98245 24.634598,102.95515 23.559201,103.29213 C 24.868338,99.806680 26.182555,96.323930 27.491673,92.838480 C 27.736522,92.115811 28.428448,92.034007 29.210913,92.087531 z M 74.128085,92.087531 C 74.909492,92.141397 75.777281,92.321185 76.400610,92.146824 C 77.627816,95.404710 78.848976,98.670737 80.076199,101.92860 C 81.114860,103.46841 80.062904,103.43307 78.692922,103.27236 C 77.248702,103.74706 76.843666,102.89011 76.301803,101.73099 C 75.026289,101.16954 72.578385,101.03318 72.033388,102.73882 C 71.686099,103.98405 69.548381,102.95410 68.476375,103.29213 C 69.785493,99.806680 71.099749,96.323930 72.408849,92.838480 C 72.651896,92.115048 73.346682,92.033686 74.128085,92.087531 z M 113.07738,92.107309 C 113.68543,92.149477 114.34399,92.264244 114.85589,92.166602 C 114.85589,95.836482 114.85587,99.503694 114.85589,103.17355 C 113.80569,103.50109 112.67686,103.18767 111.59529,103.29213 C 110.20570,101.25479 108.81913,99.200878 107.42567,97.166169 C 107.42567,99.087153 107.!
 42567,101.01543 107.42567,102.93642 C 106.83190,103.76151 105.22577,103.07726 104.20459,103.27236 C 104.20459,100.97934 104.20459,98.688526 104.20459,96.395483 C 104.45098,95.058823 103.70136,93.010609 104.59983,92.146824 C 105.54300,92.080296 106.48285,92.227020 107.42567,92.166602 C 108.82286,94.214052 110.21459,96.267089 111.61505,98.312328 C 111.61505,96.381192 111.61505,94.433656 111.61505,92.502541 C 111.91313,92.089843 112.46933,92.065141 113.07738,92.107309 z M 17.472762,92.127067 C 18.869098,92.142644 20.247220,92.298774 21.504042,92.937288 C 23.926501,94.879196 24.174297,98.892231 22.531630,101.41482 C 20.328928,104.23001 16.379914,103.04626 13.303155,103.29213 C 13.308218,99.584473 13.285426,95.873344 13.303155,92.166602 C 14.653722,92.240245 16.076428,92.111470 17.472762,92.127067 z M 41.166427,92.127067 C 42.630747,92.119750 44.093158,92.191484 45.434841,92.621086 C 47.614491,93.947435 47.093750,97.525040 44.703673,98.332065 C 45.959604,99.639304 46.779601,101.!
 24559 47.569037,102.85739 C 47.759643,103.86795 44.884948,103.!
 00514 43
.893466,103.29213 C 42.970229,101.43530 41.999814,99.593076 40.514297,98.114711 C 40.317368,99.507204 40.211776,100.91672 40.277164,102.32383 C 40.689397,104.19602 37.923247,102.92394 36.818957,103.29213 C 36.818957,99.579239 36.818957,95.859738 36.818957,92.146824 C 38.221301,92.216588 39.702088,92.134383 41.166427,92.127067 z M 54.880680,92.146824 C 56.389138,92.146824 57.897556,92.146824 59.405994,92.146824 C 59.987728,94.396955 60.557187,96.656592 61.144983,98.905155 C 61.733985,96.657557 62.304909,94.396975 62.883969,92.146824 C 64.389885,92.146824 65.903352,92.146824 67.409268,92.146824 C 67.409268,95.292798 67.409268,98.446692 67.409268,101.59267 C 68.110669,103.79747 66.105657,103.29123 64.603190,103.29213 C 64.490603,101.30864 64.887521,99.268467 64.286999,97.344027 C 63.304419,98.835471 63.192242,100.67284 62.666589,102.34361 C 62.658707,103.97971 60.873486,103.09944 59.860511,103.27236 C 59.233621,101.30538 59.122742,99.145583 58.022715,97.363764 C 57.453594,99.10!
 2228 57.798935,100.94269 57.706525,102.73882 C 57.576637,104.00630 55.758778,102.99523 54.880680,103.27236 C 54.880680,99.567047 54.880680,95.852120 54.880680,92.146824 z M 86.518347,95.605040 C 86.678148,95.557907 87.024159,95.903393 86.459060,95.822393 C 86.429221,95.693617 86.465069,95.620738 86.518347,95.605040 z M 86.518347,98.984206 C 86.722712,99.041387 86.531275,99.465725 86.162641,99.102750 C 86.321159,99.002797 86.450214,98.965131 86.518347,98.984206 z M 67.547613,105.01135 C 67.698176,104.95354 67.830329,105.55843 67.409268,105.34728 C 67.443037,105.12717 67.497411,105.03064 67.547613,105.01135 z M 36.562074,105.24849 C 36.680632,105.14896 37.027939,105.65251 36.562074,105.58444 C 36.514043,105.36965 36.522535,105.28166 36.562074,105.24849 z &quot;
+       style=&quot;fill:url(#linearGradient2461);fill-opacity:1.0000000;fill-rule:evenodd;stroke:none;stroke-width:8.8750000;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4.0000000;stroke-opacity:0.79591835&quot;
+       id=&quot;rect1347&quot; /&gt;
   &lt;/g&gt;
   &lt;text
-     xml:space=&quot;preserve&quot;
+     sodipodi:linespacing=&quot;100.00000%&quot;
+     x=&quot;86.210068&quot;
+     y=&quot;153.53935&quot;
+     style=&quot;font-size:14.000000;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:100.00000%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
      id=&quot;text1291&quot;
-     style=&quot;font-size:14.000000;font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;line-height:100.00000%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
-     y=&quot;145.53935&quot;
-     x=&quot;86.210068&quot;&gt;&lt;tspan
-       id=&quot;tspan1295&quot;
-       y=&quot;145.53935&quot;
-       x=&quot;86.210068&quot;&gt;Version 0.0.8&lt;/tspan&gt;&lt;/text&gt;
+     xml:space=&quot;preserve&quot;&gt;&lt;tspan
+       x=&quot;86.210068&quot;
+       y=&quot;153.53935&quot;
+       id=&quot;tspan1295&quot;&gt;Version 0.0.8&lt;/tspan&gt;&lt;/text&gt;
   &lt;text
-     xml:space=&quot;preserve&quot;
+     sodipodi:linespacing=&quot;100.00000%&quot;
+     x=&quot;51.608505&quot;
+     y=&quot;166.97377&quot;
+     style=&quot;font-size:12.000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:100.00000%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
      id=&quot;text1297&quot;
-     style=&quot;font-size:12.000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:100.00000%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
-     y=&quot;158.97377&quot;
-     x=&quot;51.608505&quot;&gt;&lt;tspan
-       id=&quot;tspan2602&quot;
-       y=&quot;158.97377&quot;
-       x=&quot;51.608505&quot;&gt;&quot;It's not like RPN at all&quot;&lt;/tspan&gt;&lt;/text&gt;
+     xml:space=&quot;preserve&quot;&gt;&lt;tspan
+       x=&quot;51.608505&quot;
+       y=&quot;166.97377&quot;
+       id=&quot;tspan2602&quot;&gt;&quot;It's not like RPN at all&quot;&lt;/tspan&gt;&lt;/text&gt;
   &lt;text
-     xml:space=&quot;preserve&quot;
+     sodipodi:linespacing=&quot;120.00000%&quot;
+     x=&quot;189.8419&quot;
+     y=&quot;193.84258&quot;
+     style=&quot;font-size:10.000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:120.00000%;writing-mode:lr-tb;text-anchor:end;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
      id=&quot;text1311&quot;
-     style=&quot;font-size:10.000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:120.00000%;writing-mode:lr-tb;text-anchor:end;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
-     y=&quot;185.84258&quot;
-     x=&quot;189.8419&quot;&gt;&lt;tspan
-       id=&quot;tspan1317&quot;
-       y=&quot;185.84258&quot;
-       x=&quot;189.8419&quot;&gt;&#169; 2004 -2005 by Sudrien&lt;/tspan&gt;&lt;tspan
-       id=&quot;tspan1319&quot;
-       y=&quot;197.84258&quot;
-       x=&quot;189.8419&quot;&gt;under the terms of the&lt;/tspan&gt;&lt;tspan
-       id=&quot;tspan1321&quot;
-       y=&quot;209.84258&quot;
-       x=&quot;189.8419&quot;&gt;GNU General Public License&lt;/tspan&gt;&lt;/text&gt;
+     xml:space=&quot;preserve&quot;&gt;&lt;tspan
+       x=&quot;189.8419&quot;
+       y=&quot;193.84258&quot;
+       id=&quot;tspan1317&quot;&gt;&#169; 2004 -2005 by Sudrien&lt;/tspan&gt;&lt;tspan
+       x=&quot;189.8419&quot;
+       y=&quot;205.84258&quot;
+       id=&quot;tspan1319&quot;&gt;under the terms of the&lt;/tspan&gt;&lt;tspan
+       x=&quot;189.8419&quot;
+       y=&quot;217.84258&quot;
+       id=&quot;tspan1321&quot;&gt;GNU General Public License&lt;/tspan&gt;&lt;/text&gt;
   &lt;text
-     xml:space=&quot;preserve&quot;
+     sodipodi:linespacing=&quot;100.00000%&quot;
+     x=&quot;26.729599&quot;
+     y=&quot;249.07288&quot;
+     style=&quot;font-size:12.000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:100.00000%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
      id=&quot;text1323&quot;
-     style=&quot;font-size:12.000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;line-height:100.00000%;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1.0000000;stroke:none;stroke-width:1.0000000px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1.0000000;font-family:Bitstream Vera Sans&quot;
-     y=&quot;241.07288&quot;
-     x=&quot;26.729599&quot;&gt;&lt;tspan
-       id=&quot;tspan1325&quot;
-       y=&quot;241.07288&quot;
-       x=&quot;26.729599&quot;&gt;http:\\darimasen.berlios.de&lt;/tspan&gt;&lt;/text&gt;
+     xml:space=&quot;preserve&quot;&gt;&lt;tspan
+       x=&quot;26.729599&quot;
+       y=&quot;249.07288&quot;
+       id=&quot;tspan1325&quot;&gt;http:\\darimasen.berlios.de&lt;/tspan&gt;&lt;/text&gt;
 &lt;/svg&gt;

Modified: trunk/src/darimasen.cpp
===================================================================
--- trunk/src/darimasen.cpp	2005-04-26 06:46:36 UTC (rev 62)
+++ trunk/src/darimasen.cpp	2005-04-27 05:37:08 UTC (rev 63)
@@ -99,7 +99,7 @@
   MainEventBox-&gt;show();
 
   DaIconModes * foo;
-  foo = new DaIconModes(  pos, *this);
+  foo = Gtk::manage(new class DaIconModes(  pos, *this));
 
   if ( IconModeList.size() == pos ){
     IconModeList.push_back(foo);
@@ -112,14 +112,14 @@
     EventBoxList[pos] = MainEventBox;
     }
 
- // Gtk::ScrolledWindow * MainScroller = Gtk::manage(new Gtk::ScrolledWindow);
- // MainScroller-&gt;show();
- // MainScroller-&gt;set_shadow_type(Gtk::SHADOW_NONE);
- // MainScroller-&gt;add(*MainEventBox);
+  Gtk::ScrolledWindow * MainScroller = Gtk::manage(new Gtk::ScrolledWindow);
+  MainScroller-&gt;show();
+  MainScroller-&gt;set_shadow_type(Gtk::SHADOW_NONE);
+  MainScroller-&gt;add(*MainEventBox);
   MainEventBox-&gt;add(*foo);
- // MainScroller-&gt;set_policy(Gtk::POLICY_ALWAYS, Gtk::POLICY_ALWAYS);
+  MainScroller-&gt;set_policy(Gtk::POLICY_ALWAYS, Gtk::POLICY_AUTOMATIC);
   foo-&gt;show();
-  Tabber-&gt;insert_page( *MainEventBox, *arrangement, pos);
+  Tabber-&gt;insert_page( *MainScroller, *arrangement, pos);
 
   }
 /**********************/

Modified: trunk/src/iconmodes.cpp
===================================================================
--- trunk/src/iconmodes.cpp	2005-04-26 06:46:36 UTC (rev 62)
+++ trunk/src/iconmodes.cpp	2005-04-27 05:37:08 UTC (rev 63)
@@ -1,9 +1,345 @@
-/* Darimasen - iconmodes.cpp - Copyright (C) 2004 - 2005 Sudrien, GPL */
-
+/* Darimasen - iconmodes.cpp - Copyright (C) 2004 - 2005 Sudrien, GPL */
+
 #include &quot;iconmodes.h&quot;
 
 /**********************/
 
+void DaIconModes::proto_icon::run() const{
+
+  // double checking the file exists
+  Glib::RefPtr&lt;const Gnome::Vfs::FileInfo&gt; info;
+  Gnome::Vfs::Handle read_handle;
+  try{
+    read_handle.open( path + FileName, Gnome::Vfs::OPEN_READ);
+    info = read_handle.get_file_info(
+      Gnome::Vfs::FILE_INFO_GET_MIME_TYPE );
+    }
+  catch(const Gnome::Vfs::exception&amp; ex){
+    std::cout &lt;&lt; &quot;Does not exist.\n&quot;;
+    return;
+    }
+
+  Gnome::Vfs::Handle exec_handle;
+
+  Glib::ustring exec = getenv(&quot;HOME&quot;);
+  try{
+    exec += &quot;/Choices/MIME-types/&quot;;
+    Glib::ustring tmp = FileMime;
+    exec += tmp.replace(tmp.find(&quot;/&quot;),1,&quot;_&quot;);
+    exec_handle.open(exec, Gnome::Vfs::OPEN_READ);
+
+    exec += &quot; \&quot;&quot;  + path + FileName + &quot;\&quot;&quot;;
+    Glib::spawn_command_line_async(exec);
+
+    parent-&gt;parent-&gt;set_message(exec + &quot; was run.&quot;);
+    return;
+
+    }
+  catch(const Gnome::Vfs::exception&amp; ex){
+    }
+
+
+  try{
+    exec = exec.substr(0, exec.rfind(&quot;_&quot;));
+    exec_handle.open(exec, Gnome::Vfs::OPEN_READ);
+    exec += &quot; \&quot;&quot;  + path + FileName + &quot;\&quot;&quot;;
+    Glib::spawn_command_line_async(exec);
+
+    parent-&gt;parent-&gt;set_message(exec + &quot; was run.&quot;);
+    return;
+    }
+  catch(const Gnome::Vfs::exception&amp; ex){
+    }
+
+  try{
+    if (Gnome::Vfs::Mime::can_be_executable(FileMime)){
+      parent-&gt;parent-&gt;set_message( &quot;Running &quot; + path + FileName);
+      Glib::spawn_command_line_async( path + FileName );
+      return;
+      }
+   }
+      catch(const Glib::Error) {}
+
+  Gtk::MessageDialog dialog(
+    &quot;This mimetype does not have any action associated with it.\n&quot;
+    &quot;should it be opened as text?&quot;,
+    false, Gtk::MESSAGE_ERROR, Gtk::BUTTONS_OK_CANCEL);
+
+
+  //Handle the response:
+  switch(dialog.run()) {
+    case(Gtk::RESPONSE_OK):
+      {
+        Glib::ustring exec = getenv(&quot;HOME&quot;);
+        exec += &quot;/Choices/MIME-types/text&quot;;
+        exec += &quot; \&quot;&quot;  + path + FileName + &quot;\&quot;&quot;;
+        Glib::spawn_command_line_async(exec);
+        parent-&gt;parent-&gt;set_message(exec + &quot; was opened as a text file.&quot;);
+        return;
+        }
+      break;
+    default:
+      parent-&gt;parent-&gt;set_message(&quot;Well, that was usefull.&quot;);
+      break;
+    }
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::runAsText() const{
+
+  // double checking the file exists
+  Glib::RefPtr&lt;const Gnome::Vfs::FileInfo&gt; info;
+  Gnome::Vfs::Handle read_handle;
+  try{
+    read_handle.open( path + FileName, Gnome::Vfs::OPEN_READ);
+    info = read_handle.get_file_info(
+      Gnome::Vfs::FILE_INFO_GET_MIME_TYPE );
+    }
+  catch(const Gnome::Vfs::exception&amp; ex){
+    std::cout &lt;&lt; &quot;Does not exist.\n&quot;;
+    return;
+    }
+
+  Gnome::Vfs::Handle exec_handle;
+  Glib::ustring exec = getenv(&quot;HOME&quot;);
+  try{
+    exec += &quot;/Choices/MIME-types/text&quot;;
+    exec_handle.open(exec, Gnome::Vfs::OPEN_READ);
+    exec += &quot; \&quot;&quot;  + path + FileName + &quot;\&quot;&quot;;
+    Glib::spawn_command_line_async(exec);
+
+    parent-&gt;parent-&gt;set_message(exec + &quot; was run.&quot;);
+    return;
+    }
+  catch(const Gnome::Vfs::exception&amp; ex){}
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::SetRunAction() const{
+
+  Gnome::Vfs::Handle read_handle;
+  Glib::RefPtr&lt;const Gnome::Vfs::FileInfo&gt; info;
+  Glib::ustring exec_subtype;
+  Glib::ustring exec_mimetype;
+
+  try {
+    read_handle.open( path + FileName, Gnome::Vfs::OPEN_READ);
+    info = read_handle.get_file_info(
+        Gnome::Vfs::FILE_INFO_GET_MIME_TYPE |
+        Gnome::Vfs::FILE_INFO_FORCE_SLOW_MIME_TYPE );
+
+    exec_subtype  = info-&gt;get_mime_type();
+    exec_subtype  = exec_subtype.replace( exec_subtype.find(&quot;/&quot;), 1, &quot;_&quot; );
+    exec_mimetype = exec_subtype.substr( 0, exec_subtype.rfind(&quot;_&quot;) );
+
+    ChooseActionDialogue * chooseAction;
+    chooseAction = new ChooseActionDialogue(exec_subtype);
+    chooseAction-&gt;show();
+    }
+  catch(const Gnome::Vfs::exception&amp; ex) {
+    parent-&gt;parent-&gt;set_message(&quot;Err... Setting error?&quot;);
+    }
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::SetPermissions() const{
+
+
+  Gnome::Vfs::Handle read_handle;
+  Glib::RefPtr&lt;Gnome::Vfs::FileInfo&gt; info;
+
+  try {
+    read_handle.open( path + FileName, Gnome::Vfs::OPEN_READ);
+    info = read_handle.get_file_info(Gnome::Vfs::FILE_INFO_GET_ACCESS_RIGHTS);
+
+    SetPermissionsDialogue * setPermissions;
+    setPermissions = new SetPermissionsDialogue(info,path);
+    setPermissions-&gt;show();
+    }
+  catch(const Gnome::Vfs::exception&amp; ex) {
+    parent-&gt;parent-&gt;set_message(&quot;Err... Setting error?&quot;);
+    }
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::release_select(GdkEventButton* event){
+
+  if ((event-&gt;type == GDK_BUTTON_RELEASE) &amp;&amp; (event-&gt;button == 1)  &amp;&amp; (parent-&gt;lastclick &lt; event-&gt;time)){
+    parent-&gt;lastclick = event-&gt;time + 1000;
+    run();
+    }
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::press_select(GdkEventButton* event){
+  if ((event-&gt;type == GDK_BUTTON_PRESS) &amp;&amp; (event-&gt;button == 3)){
+
+    for( int i=10; i &gt; 0; i--)
+      parent-&gt;prompt.items().pop_back();
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Open \&quot;&quot; + FileName + &quot;\&quot;&quot;,
+        sigc::mem_fun(*this,&amp;DaIconModes::proto_icon::run)));
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Open as text &quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::runAsText)));
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::SeparatorElem());
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Set Run Action...&quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::SetRunAction)));
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Permissions...&quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::SetPermissions)));
+
+
+    parent-&gt;prompt.items().push_back( Gtk::Menu_Helpers::SeparatorElem());
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Copy To...&quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::copy)));
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Move To...&quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::move)));
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Link To...&quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::link)));
+
+    parent-&gt;prompt.items().push_back(
+      Gtk::Menu_Helpers::MenuElem(&quot;Delete &quot;,
+        sigc::mem_fun(*this, &amp;DaIconModes::proto_icon::unlinkify)));
+
+
+    parent-&gt;prompt.popup(event-&gt;button, event-&gt;time);
+    }
+  }
+
+/**********************/
+
+DaIconModes::proto_icon::proto_icon(
+      DaIconModes&amp; getParent,
+      Glib::ustring getPath,
+      const Glib::RefPtr&lt;const Gnome::Vfs::FileInfo&gt; getFile) {
+
+  path = getPath;
  parent = &getParent;
+
+  icon = parent-&gt;getIcon(getFile-&gt;get_mime_type());
+
+  FileName = getFile-&gt;get_name();
+
+  if (getFile-&gt;get_name().length() &gt; 25){
+    int last = getFile-&gt;get_name().rfind(&quot;.&quot;);
+    if (last != -1){
+      ShortFileName = getFile-&gt;get_name().substr(0, 20) + &quot;..&quot; + getFile-&gt;get_name().substr(last);
+      }
+    else {
+      ShortFileName = getFile-&gt;get_name().substr(0,22) + &quot;...&quot;;
+      }
+    }
+  else {
+  ShortFileName = getFile-&gt;get_name();
+  }
+
+  FileMime = getFile-&gt;get_mime_type();
+
+  guint size = getFile-&gt;get_size();
+  if(size &lt; 1024)
+    FileSize = int2ustr(size) + &quot; B&quot;;
+  else if (size &lt; 1048576)
+    FileSize = int2ustr(size / 1024) + &quot; KB&quot;;
+  else
+    FileSize = int2ustr(size / 1048576) + &quot; MB&quot;;
+
+  hidden = (getFile-&gt;get_name().substr(0,1) == &quot;.&quot;);
+  };
+
+/**********************/
+
+DaIconModes::proto_icon::~proto_icon(){
+  std::cout &lt;&lt; &quot;proto deleted&quot;;
+  }
+
+/**********************/
+
+DaIconModes::Sidecon::Sidecon(proto_icon &amp; in){
+
+  Arrange = new Gtk::Table();
+  source = &in;
+
+  Icon = new Gtk::Image(source-&gt;icon-&gt;scale_simple(48,48,Gdk::INTERP_TILES));
+  Arrange-&gt;attach(*Icon, 0, 1, 0, 3, Gtk::FILL, Gtk::FILL, 0, 0);
+
+  ShortName = new Gtk::Label(&quot; &quot; + source-&gt;ShortFileName);
+  ShortName-&gt;set_alignment(0,0.5);
+  Arrange-&gt;attach(*ShortName, 1, 2, 0, 1, Gtk::FILL, Gtk::AttachOptions(), 0, 0);
+
+  Mime = new Gtk::Label(&quot; &quot; + source-&gt;FileMime);
+  Mime-&gt;set_alignment(0,0.5);
+  Arrange-&gt;attach(*Mime, 1, 2, 1, 2, Gtk::FILL, Gtk::AttachOptions(), 0, 0);
+
+  Size = new Gtk::Label(&quot; &quot; + source-&gt;FileSize);
+  Size-&gt;set_alignment(0,0.5);
+  Arrange-&gt;attach(*Size, 1, 2, 2, 3, Gtk::FILL, Gtk::AttachOptions(), 0, 0);
+
+  add(*Arrange);
+  show_all_children();
+
+  signal_button_press_event().connect_notify(
+    sigc::mem_fun(*source, &amp;DaIconModes::proto_icon::press_select));
+  signal_button_release_event().connect_notify(
+    sigc::mem_fun(*source, &amp;DaIconModes::proto_icon::release_select));
+
+  }
+
+/**********************/
+
+DaIconModes::Sidecon::~Sidecon(){
+
+  }
+
+/**********************/
+
+DaIconModes::Listview::Listview(proto_icon &amp; in){
+
+  source = &in;
+  Arrange = new Gtk::Table();
+
+  Icon = new Gtk::Image(source-&gt;icon-&gt;scale_simple(16,16,Gdk::INTERP_TILES));
+  Arrange-&gt;attach(*Icon, 0, 1, 0, 1, Gtk::FILL, Gtk::FILL, 0, 0);
+
+  Name = new Gtk::Label(&quot; &quot; + source-&gt;ShortFileName);
+  Name-&gt;set_alignment(0,0.5);
+  Arrange-&gt;attach(*Name, 1, 2, 0, 1, Gtk::FILL, Gtk::AttachOptions(), 0, 0);
+
+  add(*Arrange);
+  show_all_children();
+
+  signal_button_press_event().connect_notify(
+    sigc::mem_fun(*source, &amp;DaIconModes::proto_icon::press_select));
+  signal_button_release_event().connect_notify(
+    sigc::mem_fun(*source, &amp;DaIconModes::proto_icon::release_select));
+
+  }
+
+/**********************/
+
+DaIconModes::Listview::~Listview(){
+
+  }
+
+/**********************/
+
 DaIconModes::ChooseActionDialogue::ChooseActionDialogue(Glib::ustring mimeType){
 
   mime = mimeType;
@@ -335,67 +671,75 @@
     bool recursing_will_loop,
     bool recurse) {
 
-if (info-&gt;get_type() != Gnome::Vfs::FILE_TYPE_DIRECTORY){
-filesAtPath++;
-    Gtk::TreeModel::Row row = *(m_refTreeModel-&gt;append());
+  if (info-&gt;get_type() != Gnome::Vfs::FILE_TYPE_DIRECTORY){
+    iconlist[slotsUsed++] = new proto_icon(*this, parent-&gt;get_history(position), info);
+    }
 
-    row[iconlist-&gt;m_col_icon] = getIcon(info-&gt;get_mime_type());
+  return true;
+  }
 
-    row[iconlist-&gt;m_col_name] = info-&gt;get_name();
+/**********************/
 
+void DaIconModes::on_size_allocate(Gtk::Allocation&amp; allocation){
 
-	Glib::ustring sized;
-        if( info-&gt;get_size() &lt; 1024 ){
-          sized = (int2ustr(info-&gt;get_size()) + &quot; B&quot;);
-          }
-        else if ( info-&gt;get_size() &lt; (1024 * 1024) ){
-          sized = (int2ustr(info-&gt;get_size() / 1024) + &quot; KB&quot;);
-          }
-        else{
-          sized = (int2ustr(info-&gt;get_size() / 1048576) + &quot; MB&quot;);
-          }
-          row[iconlist-&gt;m_col_size] = sized;
+  int oldie = IconsHigh;
 
-
-        row[iconlist-&gt;m_col_mime] = info-&gt;get_mime_type();
-
-
-
-        row[iconlist-&gt;m_col_all] = (info-&gt;get_name().substr(0,25) + &quot;\n&quot; + sized + &quot;\n&quot; + info-&gt;get_mime_type().substr(0,25));
-
-
-//  if (info-&gt;get_type() != Gnome::Vfs::FILE_TYPE_DIRECTORY){
-//    iconlist[slotsUsed++] = new proto_icon(*this, parent-&gt;get_history(position), info);
+  switch(mode){
+    case 0:
+      IconsHigh = allocation.get_height() / 57;
+      break;
+    case 1:
+      IconsHigh = allocation.get_height() / 25;
+      break;
     }
+  if ( oldie != IconsHigh ){ //if resize is needed
+    Gtk::Widget * tmp = get_child();
+    redraw();
+    }
 
-  return true;
+  Gtk::EventBox::on_size_allocate(allocation);
   }
 
 /**********************/
 
-void DaIconModes::on_size_allocate(Gtk::Allocation&amp; allocation){
+void DaIconModes::redraw(){
+  Gtk::Widget * tmp = get_child();
+  
+  if (tmp)
+    delete tmp; // actually DisposableTable, but segfaulted otherwise
 
- switch(mode){
-   case 0:
-     
-       m_TreeView.set_columns((filesAtPath - 1)/(allocation.get_height() / 60) + 1);
-  /*
-    // std::vector&lt;guint&gt; * order = new std::vector&lt;guint&gt;;
-     for(int i = 0; i &lt; (allocation.get_height() / 60); i++){
-       for(int j = 0; j &lt; filesAtPath; j += (allocation.get_height() / 60)){
-         std::cout&lt;&lt; i+j &lt;&lt; &quot;\n&quot;;//order-&gt;push_back(j+i);
-	 }
-       }
+  Gtk::Table * DisposableTable = new Gtk::Table((filesAtPath)/IconsHigh+1,IconsHigh);
+  add(*DisposableTable);
 
-*/
-     break;
-   case 1:
-     m_TreeView.set_columns(filesAtPath/(allocation.get_height() / 30) + 1);       
-     break;
-     }   
-  Gtk::EventBox::on_size_allocate(allocation);
+  int y_pos = 0;
+  int x_pos = 0;
+
+  for(int i = 0; i &lt; slotsUsed; i++){
+    if(  !iconlist[i]-&gt;hidden || parent-&gt;optShowHidden-&gt;get_active()){
+      switch(mode){
+        case 0:
+          Sidecon * tmpSidecon = new Sidecon(*iconlist[i]);
+          DisposableTable-&gt;attach( *tmpSidecon, x_pos, x_pos+1, y_pos, y_pos+1,Gtk::FILL, Gtk::FILL, 4, 4);
+          break;
+        case 1:
+          Listview * tmpListview = new Listview(*iconlist[i]);
+          DisposableTable-&gt;attach( *tmpListview, x_pos, x_pos+1, y_pos, y_pos+1,Gtk::FILL, Gtk::FILL, 4, 4);
+          break;
+        }
+
+      y_pos++; 
+      if(parent-&gt;get_mode() == 0 || parent-&gt;get_mode() == 1){
+        if ( y_pos + 1 &gt; IconsHigh){
+          y_pos = 0;
+          x_pos++;
+          }
+        }
+      }
+    }
+  DisposableTable-&gt;show();
+  DisposableTable-&gt;show_all_children();
   }
-
+
 /**********************/
 
 DaIconModes::DaIconModes(
@@ -409,47 +753,32 @@
   lastclick = 0;  // a double-click detector. 
   filesAtPath = 0; // count files in directory
 
+  try{  //count up the files in the directory. 
+    Gnome::Vfs::DirectoryHandle handle;
+    handle.open(parent-&gt;get_history(position), Gnome::Vfs::FILE_INFO_DEFAULT);
+    bool file_exists = true;
+    while(file_exists){
+      handle.read_next(file_exists);
+      filesAtPath++;
+      }
+    }
+  catch(const Gnome::Vfs::exception&amp;){}
+
   set_visible_window(false);
 
-
-  Gtk::ScrolledWindow * MainScroller = Gtk::manage(new Gtk::ScrolledWindow);
-  MainScroller-&gt;show();
-  MainScroller-&gt;set_policy(Gtk::POLICY_ALWAYS, Gtk::POLICY_NEVER);
-  add(*MainScroller);
-  iconlist = new proto_icon;
-  MainScroller-&gt;add(m_TreeView);
-  m_TreeView.show();
-  m_refTreeModel = Gtk::ListStore::create(*iconlist);
-  m_TreeView.set_model(m_refTreeModel);
-
-
-
-  m_TreeView.set_text_column(iconlist-&gt;m_col_all);
-  m_TreeView.set_pixbuf_column(iconlist-&gt;m_col_icon);
-  m_TreeView.set_orientation(Gtk::ORIENTATION_HORIZONTAL );
-           m_TreeView.show_all_children();
-
+  iconlist = new proto_icon*[filesAtPath];
+  slotsUsed = 0;
+  IconsHigh = 0;
   try { // make all those files into proto_icons
     Gnome::Vfs::DirectoryHandle::visit(
       parent-&gt;get_history(position),
       Gnome::Vfs::FILE_INFO_GET_MIME_TYPE |
-      Gnome::Vfs::FILE_INFO_FORCE_FAST_MIME_TYPE |
       Gnome::Vfs::FILE_INFO_FOLLOW_LINKS ,
       Gnome::Vfs::DIRECTORY_VISIT_LOOPCHECK,
       sigc::mem_fun(*this,&amp;DaIconModes::addEntry));
     }
   catch(const Gnome::Vfs::exception&amp; ex){}
 
-  m_TreeView.set_item_width( m_TreeView.get_icon_width()+ 235);
-  m_TreeView.signal_button_press_event().connect_notify(
-    sigc::bind&lt;Glib::ustring&gt;(
-sigc::mem_fun(*this,&amp;DaIconModes::icon_selected), &quot;ha!&quot;
-
-
-// IconList-&gt;set_default_sort_func( sigc::mem_fun(*this, &amp;DaIconModes::on_model_sort) );
-));
-
-
   }
 
 /**********************/
@@ -462,30 +791,280 @@
 
  void DaIconModes::SwitchHidden(guint pos){
 
-position = pos;/*
+position = pos;
 if (parent-&gt;optShowHidden-&gt;get_active())
     parent-&gt;set_message(&quot;Showing Hidden Files&quot;);
 else
     parent-&gt;set_message(&quot;Hidden Files are hidden again&quot;);
-*/
+
+  redraw();
   }
 
 /**********************/
+/**********************/
 
-void DaIconModes::icon_selected(GdkEventButton* event, Glib::ustring file){
-  if( (event-&gt;type == GDK_2BUTTON_PRESS) &amp;&amp; (event-&gt;button == 1)){
+DaIconModes::CopyDialogue::CopyDialogue(Glib::ustring file, Darimasen&amp; parent){
 
-    //RunFile(file);
-    //m_Menu_Popup.popup(event-&gt;button, event-&gt;time);
+grandparent = &parent;
+   cancelbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-cancel&quot;)));
+   okbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-ok&quot;)));
+   label = Gtk::manage(new class Gtk::Label(file));
+   entry = Gtk::manage(new class Gtk::Entry());
 
-    std::vector&lt;Gtk::TreePath&gt; refSelection =   m_TreeView.get_selected_items();
-    if(refSelection.size() &gt; 0){
-      std::cout &lt;&lt; &quot;Running File :&quot; &lt;&lt; refSelection[0].to_string() &lt;&lt; &quot;\n&quot;;
-      Gtk::TreeModel::Row row = *(m_refTreeModel-&gt;get_iter(refSelection[0]));
-      std::cout &lt;&lt;  parent-&gt;get_history(position) &lt;&lt; row[iconlist-&gt;m_col_name] &lt;&lt; &quot;\n&quot;;
-      }
-    }
+   okbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+   okbutton-&gt;set_flags(Gtk::CAN_DEFAULT);
+   cancelbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+
+   set_title(&quot;Copy File to&quot;);
+   set_modal(true);
+
+   get_vbox()-&gt;pack_start(*label, Gtk::PACK_SHRINK, 0);
+   get_vbox()-&gt;pack_start(*entry, Gtk::PACK_SHRINK, 0);
+
+
+   entry-&gt;set_text(file);
+
+   add_action_widget(*cancelbutton, -6);
+   add_action_widget(*okbutton, -5);
+
+
+   okbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::CopyDialogue::onOk));
+   cancelbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::CopyDialogue::onCancel));
+
+
+   show_all_children();
   }
 
+/**********************/
 
+void DaIconModes::CopyDialogue::onOk(){
+//  std::cout &lt;&lt; &quot;copying &quot; &lt;&lt; label-&gt;get_text()
+//    &lt;&lt; &quot;\nto &quot; &lt;&lt; entry-&gt;get_text() &lt;&lt; &quot;\n\n&quot;;
+
+//rename(label-&gt;get_text().c_str(), entry-&gt;get_text().c_str());
+    Glib::spawn_command_line_async((Glib::ustring)&quot;cp \&quot;&quot;  + label-&gt;get_text().c_str() + (Glib::ustring)&quot;\&quot; \&quot;&quot; + entry-&gt;get_text().c_str()+ &quot;\&quot;&quot;);
+
+  grandparent-&gt;updateView(
+    label-&gt;get_text().substr(0, label-&gt;get_text().rfind(slash,label-&gt;get_text().length())+1),
+    entry-&gt;get_text().substr(0, entry-&gt;get_text().rfind(slash,entry-&gt;get_text().length())+1));
+
+  hide();
+  }
+
 /**********************/
+
+void DaIconModes::CopyDialogue::onCancel(){
+  hide();
+  }
+
+/**********************/
+
+DaIconModes::CopyDialogue::~CopyDialogue(){}
+
+/**********************/
+/**********************/
+
+DaIconModes::MoveDialogue::MoveDialogue(Glib::ustring file, Darimasen&amp; parent){
+
+grandparent = &parent;
+   cancelbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-cancel&quot;)));
+   okbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-ok&quot;)));
+   label = Gtk::manage(new class Gtk::Label(file));
+   entry = Gtk::manage(new class Gtk::Entry());
+
+   okbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+   okbutton-&gt;set_flags(Gtk::CAN_DEFAULT);
+   cancelbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+
+   set_title(&quot;Move File to&quot;);
+   set_modal(true);
+
+   get_vbox()-&gt;pack_start(*label, Gtk::PACK_SHRINK, 0);
+   get_vbox()-&gt;pack_start(*entry, Gtk::PACK_SHRINK, 0);
+
+
+   entry-&gt;set_text(file);
+
+   add_action_widget(*cancelbutton, -6);
+   add_action_widget(*okbutton, -5);
+
+
+   okbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::MoveDialogue::onOk));
+   cancelbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::MoveDialogue::onCancel));
+
+
+   show_all_children();
+  }
+
+/**********************/
+
+void DaIconModes::MoveDialogue::onOk(){
+//  std::cout &lt;&lt; &quot;moveing &quot; &lt;&lt; label-&gt;get_text()
+//    &lt;&lt; &quot;\nto &quot; &lt;&lt; entry-&gt;get_text() &lt;&lt; &quot;\n\n&quot;;
+
+ // rename(label-&gt;get_text().c_str(), entry-&gt;get_text().c_str());
+
+    Glib::spawn_command_line_async((Glib::ustring)&quot;mv \&quot;&quot;  + label-&gt;get_text().c_str() + (Glib::ustring)&quot;\&quot; \&quot;&quot; + entry-&gt;get_text().c_str()+ &quot;\&quot;&quot;);
+
+  grandparent-&gt;updateView(
+    label-&gt;get_text().substr(0, label-&gt;get_text().rfind(slash,label-&gt;get_text().length())+1),
+    entry-&gt;get_text().substr(0, entry-&gt;get_text().rfind(slash,entry-&gt;get_text().length())+1));
+
+  hide();
+  }
+
+/**********************/
+
+void DaIconModes::MoveDialogue::onCancel(){
+  hide();
+  }
+
+/**********************/
+
+DaIconModes::MoveDialogue::~MoveDialogue(){}
+
+/**********************/
+/**********************/
+
+DaIconModes::LinkDialogue::LinkDialogue(Glib::ustring file, Darimasen&amp; parent){
+
+grandparent = &parent;
+   cancelbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-cancel&quot;)));
+   okbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-ok&quot;)));
+   label = Gtk::manage(new class Gtk::Label(file));
+   entry = Gtk::manage(new class Gtk::Entry());
+
+   okbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+   okbutton-&gt;set_flags(Gtk::CAN_DEFAULT);
+   cancelbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+
+   set_title(&quot;Link File to&quot;);
+   set_modal(true);
+
+   get_vbox()-&gt;pack_start(*label, Gtk::PACK_SHRINK, 0);
+   get_vbox()-&gt;pack_start(*entry, Gtk::PACK_SHRINK, 0);
+
+
+   entry-&gt;set_text(file);
+
+   add_action_widget(*cancelbutton, -6);
+   add_action_widget(*okbutton, -5);
+
+
+   okbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::LinkDialogue::onOk));
+   cancelbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::LinkDialogue::onCancel));
+
+
+   show_all_children();
+  }
+
+/**********************/
+
+void DaIconModes::LinkDialogue::onOk(){
+//  std::cout &lt;&lt; &quot;linking &quot; &lt;&lt; label-&gt;get_text()
+ //   &lt;&lt; &quot;\nto &quot; &lt;&lt; entry-&gt;get_text() &lt;&lt; &quot;\n\n&quot;;
+
+  //symlink(label-&gt;get_text().c_str(), entry-&gt;get_text().c_str());
+    Glib::spawn_command_line_async((Glib::ustring)&quot;ln -s \&quot;&quot;  + label-&gt;get_text().c_str() + (Glib::ustring)&quot;\&quot; \&quot;&quot; + entry-&gt;get_text().c_str() + &quot;\&quot;&quot;);
+
+  grandparent-&gt;updateView(
+    label-&gt;get_text().substr(0, label-&gt;get_text().rfind(slash,label-&gt;get_text().length())+1),
+    entry-&gt;get_text().substr(0, entry-&gt;get_text().rfind(slash,entry-&gt;get_text().length())+1));
+
+  hide();
+  }
+
+/**********************/
+
+void DaIconModes::LinkDialogue::onCancel(){
+  hide();
+  }
+
+/**********************/
+
+DaIconModes::LinkDialogue::~LinkDialogue(){}
+
+/**********************/
+/**********************/
+
+DaIconModes::DeleteDialogue::DeleteDialogue(Glib::ustring file, Darimasen&amp; parent){
+
+grandparent = &parent;
+   cancelbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-cancel&quot;)));
+   okbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-ok&quot;)));
+   label = Gtk::manage(new class Gtk::Label(file));
+
+   okbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+   okbutton-&gt;set_flags(Gtk::CAN_DEFAULT);
+   cancelbutton-&gt;set_flags(Gtk::CAN_FOCUS);
+
+   set_title(&quot;Delete File&quot;);
+   set_modal(true);
+
+   get_vbox()-&gt;pack_start(*label, Gtk::PACK_SHRINK, 0);
+
+   add_action_widget(*cancelbutton, -6);
+   add_action_widget(*okbutton, -5);
+
+
+   okbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::DeleteDialogue::onOk));
+   cancelbutton-&gt;signal_clicked().connect_notify(sigc::mem_fun(*this, &amp;DaIconModes::DeleteDialogue::onCancel));
+
+
+   show_all_children();
+  }
+
+/**********************/
+
+void DaIconModes::DeleteDialogue::onOk(){
+//  std::cout &lt;&lt; &quot;delete &quot; &lt;&lt; label-&gt;get_text() &lt;&lt; &quot;\n\n&quot;;
+
+ // unlink( label-&gt;get_text().c_str() );
+  Glib::spawn_command_line_async((Glib::ustring)&quot;rm \&quot;&quot;  + label-&gt;get_text().c_str() + &quot;\&quot;&quot;);
+
+  grandparent-&gt;updateView(
+    label-&gt;get_text().substr(0, label-&gt;get_text().rfind(slash,label-&gt;get_text().length())+1),
+    label-&gt;get_text().substr(0, label-&gt;get_text().rfind(slash,label-&gt;get_text().length())+1));
+   //std::cout &lt;&lt; label-&gt;get_text().substr(0, label-&gt;get_text().rfind(slash,label-&gt;get_text().length())+1) ;
+  hide();
+  }
+
+/**********************/
+
+void DaIconModes::DeleteDialogue::onCancel(){
+  hide();
+  }
+
+/**********************/
+
+DaIconModes::DeleteDialogue::~DeleteDialogue(){}
+
+/**********************/
+
+void DaIconModes::proto_icon::copy() {
+  CopyDialogue * cp =  new CopyDialogue( path + FileName , *parent-&gt;parent);
+  cp-&gt;show();
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::move() {
+  MoveDialogue * mv =  new MoveDialogue( path + FileName , *parent-&gt;parent);
+  mv-&gt;show();
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::link() {
+  LinkDialogue * ln =  new LinkDialogue( path + FileName , *parent-&gt;parent);
+  ln-&gt;show();
+  }
+
+/**********************/
+
+void DaIconModes::proto_icon::unlinkify() {
+  DeleteDialogue * del =  new DeleteDialogue( path + FileName , *parent-&gt;parent);
+  del-&gt;show();
+  }
+
+/**********************/

Modified: trunk/src/iconmodes.h
===================================================================
--- trunk/src/iconmodes.h	2005-04-26 06:46:36 UTC (rev 62)
+++ trunk/src/iconmodes.h	2005-04-27 05:37:08 UTC (rev 63)
@@ -1,6 +1,6 @@
-/* Darimasen - iconmodes.h - Copyright (C) 2004 - 2005 Sudrien, GPL */
-
-#ifndef ICONMODES_H
+/* Darimasen - iconmodes.h - Copyright (C) 2004 - 2005 Sudrien, GPL */
+
+#ifndef ICONMODES_H
 #define ICONMODES_H
 
 
@@ -8,35 +8,68 @@
 #include &lt;libgnomevfsmm.h&gt;
 #include &lt;gtkmm/table.h&gt;
 #include &lt;gdkmm/pixbuf.h&gt;
-#include &lt;gtkmm/entry.h&gt;
+#include &lt;gtkmm/entry.h&gt;
 #include &lt;gtkmm/messagedialog.h&gt;
 #include &lt;gtkmm/separator.h&gt;
-#include &lt;gtkmm/liststore.h&gt;
-#include &lt;gtkmm/iconview.h&gt;
+
 /**********************/
 
 class DaIconModes : public Gtk::EventBox {
 
-  class proto_icon : public Gtk::TreeModel::ColumnRecord {
+  class proto_icon {
+    Glib::ustring path;
    DaIconModes * parent;
+
+    void run() const;
+    void runAsText() const;
+    void SetRunAction() const;
+    void SetPermissions() const;
+    void copy();
+    void move();
+    void link();
+    void unlinkify();
+
   public:
 
-    proto_icon(){
-      add(m_col_icon);
-      add(m_col_name);
-      add(m_col_size);
-      add(m_col_mime);
-      add(m_col_all);
-      }
+    Glib::RefPtr&lt;Gdk::Pixbuf&gt; icon;
+    Glib::ustring FileName;
+    Glib::ustring ShortFileName;
+    Glib::ustring FileMime;
+    Glib::ustring FileSize;
+    bool hidden;
 
-    Gtk::TreeModelColumn&lt;Glib::RefPtr&lt;Gdk::Pixbuf&gt; &gt; m_col_icon;
-    Gtk::TreeModelColumn&lt;Glib::ustring&gt; m_col_name;
-    Gtk::TreeModelColumn&lt;Glib::ustring&gt; m_col_size;
-    Gtk::TreeModelColumn&lt;Glib::ustring&gt; m_col_mime;
+    void press_select(GdkEventButton*);
+    void release_select(GdkEventButton*);
 
-    Gtk::TreeModelColumn&lt;Glib::ustring&gt; m_col_all;
+    proto_icon(DaIconModes&amp;, Glib::ustring, const Glib::RefPtr&lt;const Gnome::Vfs::FileInfo&gt;);
+    ~proto_icon();
+    };
+
+  class Sidecon : public Gtk::EventBox {
+    proto_icon * source;
+
+    Gtk::Table * Arrange;
+    Gtk::Image * Icon;
+    Gtk::Label * ShortName;
+    Gtk::Label * Mime;
+    Gtk::Label * Size;
+
+  public:
+    Sidecon(proto_icon&amp;);
+    ~Sidecon();
   };
 
+  class Listview : public Gtk::EventBox {
+    proto_icon * source;
 
+    Gtk::Table * Arrange;
+    Gtk::Image * Icon;
+    Gtk::Label * Name;
+
+  public:
+    Listview(proto_icon&amp;);
+    ~Listview();
+  };
+
   class ChooseActionDialogue : public Gtk::Dialog {
     Gtk::RadioButton::Group _RadioBGroup_radiobutton1;
     Gtk::Button *cancelbutton1, *okbutton1;
@@ -70,14 +103,18 @@
     Gtk::Button * button1;
     Gtk::Button * button2;
 
-    Gtk::CheckButton * u_r, * u_w, * u_x,* g_r, * g_w, * g_x, * o_r, * o_w, * o_x;
+    Gtk::CheckButton * u_r, * u_w, * u_x;
+    Gtk::CheckButton * g_r, * g_w, * g_x;
+    Gtk::CheckButton * o_r, * o_w, * o_x;
     
     Gnome::Vfs::Handle info;
 
     Gtk::VSeparator * extra;
     Gtk::CheckButton * sticky, * GID, * UID;
 
-    Gtk::Label * user, * group, * others, * read, * write, * run, * explaination;
+    Gtk::Label * user, * group, * others;
+    Gtk::Label * read, * write, * run;
+    Gtk::Label * explaination;
 
     Gtk::Table * layout;
     void cancled();
@@ -89,56 +126,88 @@
     ~SetPermissionsDialogue();
     };
 
+  class CopyDialogue : public Gtk::Dialog {
+    class Gtk::Button * cancelbutton;
+    class Gtk::Button * okbutton;
+    class Gtk::Label * label;
+    class Gtk::Entry * entry;
+    void onOk();
+    void onCancel();
 
+    class Darimasen * grandparent;
+
+  public:
+    CopyDialogue(Glib::ustring, Darimasen&amp;);
+    ~CopyDialogue();
+    };
+//
+  class LinkDialogue : public Gtk::Dialog {
+    class Gtk::Button * cancelbutton;
+    class Gtk::Button * okbutton;
+    class Gtk::Label * label;
+    class Gtk::Entry * entry;
+    void onOk();
+    void onCancel();
+
+    class Darimasen * grandparent;
+
+  public:
+    LinkDialogue(Glib::ustring, Darimasen&amp;);
+    ~LinkDialogue();
+    };
+//
+  class MoveDialogue : public Gtk::Dialog {
+    class Gtk::Button * cancelbutton;
+    class Gtk::Button * okbutton;
+    class Gtk::Label * label;
+    class Gtk::Entry * entry;
+    void onOk();
+    void onCancel();
+
+    class Darimasen * grandparent;
+
+  public:
+    MoveDialogue(Glib::ustring, Darimasen&amp;);
+    ~MoveDialogue();
+    };
+//
+  class DeleteDialogue : public Gtk::Dialog {
+    class Gtk::Button * cancelbutton;
+    class Gtk::Button * okbutton;
+    class Gtk::Label * label;
+    void onOk();
+    void onCancel();
+
+    class Darimasen * grandparent;
+
+  public:
+    DeleteDialogue(Glib::ustring, Darimasen&amp;);
+    ~DeleteDialogue();
+    };
+
   Glib::RefPtr&lt;Gdk::Pixbuf&gt; getIcon(Glib::ustring);
   bool addEntry(Glib::ustring, Glib::RefPtr&lt;const Gnome::Vfs::FileInfo&gt;, bool, bool);
   void on_size_allocate(Gtk::Allocation&amp;);
+  void redraw();
 
-
   class Darimasen * parent;
-  gint position;
+  guint position;
   guint32 lastclick;
-  gint filesAtPath;
+  guint filesAtPath;
   gshort mode;
+  proto_icon ** iconlist;
+  guint slotsUsed;
+  guint IconsHigh;
+  Gtk::Menu prompt;
 
-  proto_icon * iconlist;
-  Gtk::IconView m_TreeView;
-  Glib::RefPtr&lt;Gtk::ListStore&gt; m_refTreeModel;
 
-void icon_selected(GdkEventButton*, Glib::ustring);
-
-/*
-int on_model_sort(const Gtk::TreeModel::iterator&amp; a, const Gtk::TreeModel::iterator&amp; b)
-{
-  ///* We need this function because we want to sort
-   //* folders before files.
-   
-
-  Gtk::TreeModel::Row row_a = *a;
-  Gtk::TreeModel::Row row_b = *b;
-  
-  const bool a_is_dir = row_a[iconlist-&gt;is_directory];
-  const bool b_is_dir = row_b[m_columns.is_directory];
-    
-  if(!a_is_dir &amp;&amp; b_is_dir)
-    return 1;
-  else if (a_is_dir &amp;&amp; !b_is_dir)
-    return -1;
-  else
-  {
-    Glib::ustring name_a = row_a[m_columns.display_name];
-    return name_a.compare( row_b[m_columns.display_name] );
-  }
-}
-*/
-
 public:
-  ~DaIconModes();
+  ~DaIconModes();
   DaIconModes(guint, class Darimasen&amp;);
 
   void SwitchHidden(guint);
 };
 
-/**********************/
-
-#endif //ICONMODES_H
+/**********************/
+
+#endif //ICONMODES_H


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000015.html">[Darimasen-svn] r62 - in trunk: . pixmaps src
</A></li>
	<LI>Next message: <A HREF="000017.html">[Darimasen-svn] r64 - in trunk: . src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16">[ date ]</a>
              <a href="thread.html#16">[ thread ]</a>
              <a href="subject.html#16">[ subject ]</a>
              <a href="author.html#16">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/darimasen-svn">More information about the Darimasen-svn
mailing list</a><br>
</body></html>
