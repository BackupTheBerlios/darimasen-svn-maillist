<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Darimasen-svn] r50 - in trunk: . src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/darimasen-svn/2005-April/index.html" >
   <LINK REL="made" HREF="mailto:darimasen-svn%40lists.berlios.de?Subject=Re%3A%20%5BDarimasen-svn%5D%20r50%20-%20in%20trunk%3A%20.%20src&In-Reply-To=%3C200504090115.j391FhMX013520%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000002.html">
   <LINK REL="Next"  HREF="000004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Darimasen-svn] r50 - in trunk: . src</H1>
    <B>darimasen-svn-admin at lists.berlios.de</B> 
    <A HREF="mailto:darimasen-svn%40lists.berlios.de?Subject=Re%3A%20%5BDarimasen-svn%5D%20r50%20-%20in%20trunk%3A%20.%20src&In-Reply-To=%3C200504090115.j391FhMX013520%40sheep.berlios.de%3E"
       TITLE="[Darimasen-svn] r50 - in trunk: . src">darimasen-svn-admin at lists.berlios.de
       </A><BR>
    <I>Sat Apr  9 03:15:43 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000002.html">[Darimasen-svn] r49 - in trunk: . pixmaps pixmaps/scalable src
</A></li>
        <LI>Next message: <A HREF="000004.html">[Darimasen-svn] r51 - trunk/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3">[ date ]</a>
              <a href="thread.html#3">[ thread ]</a>
              <a href="subject.html#3">[ subject ]</a>
              <a href="author.html#3">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: sudrien
Date: 2005-04-09 03:15:34 +0200 (Sat, 09 Apr 2005)
New Revision: 50

Modified:
   trunk/ChangeLog
   trunk/README
   trunk/TODO
   trunk/distribute.sh
   trunk/src/darimasen.cpp
   trunk/src/darimasen.h
Log:
0.0.7 - as said before

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2005-04-08 06:12:40 UTC (rev 49)
+++ trunk/ChangeLog	2005-04-09 01:15:34 UTC (rev 50)
@@ -1,4 +1,4 @@
-Darimasen 0.0.7 - ??
+Darimasen 0.0.7 - 20050408
 
   Sudirectory Navigation *MENU ALWAYS ONLY ONE LEVEL DEEP*
   Tab support:
@@ -11,7 +11,7 @@
   Blew away useless directory tree junk
   Stausbar actually shows messages
   
-Darimasen 0.0.6 - 20051802
+Darimasen 0.0.6 - 20050218
   
   Icon display bugs fixed
   Window resize now effects icons (speeding up)

Modified: trunk/README
===================================================================
--- trunk/README	2005-04-08 06:12:40 UTC (rev 49)
+++ trunk/README	2005-04-09 01:15:34 UTC (rev 50)
@@ -1,79 +1,52 @@
-Darimasen File Manager - 0.0.6 [Feature Incomplete - Only for Experimental Use]
+Darimasen File Manager - 0.0.7 [Feature Incomplete - Only for Experimental Use]
 
-Readme.txt - 18 Feb. 2005
+Readme.txt - 8 Apr. 2005
 
 --
 
-0.0.6 was released on the policy of, &quot;Hey- I'm going to do some
-major breakage. Time for a tarball&quot;. This breakage is reimplementing
-for tab support, or at least this is what I would like you to believe.
+0.0.7 hs been released because:
 
-This tarball corresponds with SVN commit 25. There will be no branch, as
-this software shoukld not yet be considered stable enough for anything
-but seeing where I might be going with it, and even then it is only in a
-&quot;works for me&quot; state. If your files get eaten, this is probably a gnome-vfsmm
-issue. If they get chmod'ed to the great /dev/null in the sky, don't say you
-remained unwarned.
+1. Now with tabs, it is at least as stable as 0.0.6
+2. Except for DnD, THe navigation system is believed to be complete.
 
-There is no documentation.
+It has better stability and such. Pretty sure. It's faster at several points.
+
+--
 
-There is no support, unless you have the most current SVN checkout (&gt; 25).
 
-That said, I do not regularly get segfaults on tests - though ROX is still
-my regular file manager.
+
+History (in a generic sense)
 
--Sud.
+Once upon a time there was a company. It made a Graphical User Interface (GUI), and it needed a method to sort through files. There had been file managers before, though perhaps not under that name. They helped you navigate through directories.
+
+But most everything in a GUI is represented as an icon. So what Icon do you give a directory that makes sense? They called them folders, which gave both an understandable icon and a person new to computers a way to understand files' organization.
+
+And then Microsoft copied the idea, and it was all over.
+
+Or was it?
+
+
+--
+
+
+History (in a specific sense)
+
+One day a computer science student, known as Sudrien, saw screenshots of a File Manafger called Evidence, and tried to compile it from CVS. It didn't look nearly as good as the screenshots, and clicking on the directory names in the path did very little, unlike expected.
+
+So Sudrien made a post on the Gentoo Forums - and there seemed to be nothing like the idea in Sudrien's head to be had. You can guess where this is going.
+
+Including the part where Sudrien is refered to in the third person.
+
+Darimasen is a file manager with no folders. You won't see one. Period. There are directories - menus of directories. and you can get anywhere you want with them.
+
+
+
+--
+
+
+<A HREF="http://darimasen.berlios.de">http://darimasen.berlios.de</A>
 
---
 
-Darimasen is based on one main idea: never say 'folder'; at least,
-not if you can't actually hold a folder. 
-
-Programming-wise, this means that there are not only folder icons,
-but you simply can't navigate the directory structure via the
-file view. There is (or will be) a directory tree, but even this is
-not displayed by default.
-
-Darimasen has menu-based directory navigation. It might be remind
-you of the Gnome 2.8 file chooser's buttons, or of the website
-navigation technique - but it has two major differences:
-
-1. They are all menus,
-
-2. Those menus show sibling directories, not child directories.
-
-For example, say you are in your home directory, which 
-has three subdirectories; work/, play/, and hack/. Two menus would be
-generated; the first, &quot;~/&quot;, would switch you between home and
-other important areas, like your mounted drives. THe second, in this case,
-would be a &quot;3&gt;&gt;&quot;; the current folder has three subdirectories,
-and you access them through that menu. And look! &quot;hack/&quot; has a &quot;2&quot;
-beside it, meaning it has two subdirectories itself. So clicking
-&quot;hack/&quot;, the menus change.
-
-
-~/  hack/  2&gt;&gt;
-
-
-The &quot;~/&quot; menu is the same, but the new &quot;hack/&quot; menu contains &quot;work/&quot;
- and &quot;play/&quot;... it's sibling directories.
-
-
-It's not the first thing people expect. Why do it then?
-
-Say that hack's subdirectories are live/ and die/. And that you want to
-go to live.
-
-
-~/  hack/  2&gt;&gt;
-           die/
-           live/
-
-
-
-Hey! you can read that left-to-right!
-
-
 Any suggestions can be sent to me at fusemail.com
 
 - Sudrien

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2005-04-08 06:12:40 UTC (rev 49)
+++ trunk/TODO	2005-04-09 01:15:34 UTC (rev 50)
@@ -1,51 +1,54 @@
-version 0.0.7: Embetterment by Tabs
+version 0.0.8
 
-Must address:
+Must do:
 
-resetting menus where subsubdirs have been used
+evaluate the &quot; Gtk-CRITICAL **: gtk_widget_event: assertion `WIDGET_REALIZED_FOR_EVENT (widget, event)' failed&quot; messages
+Full Folder &amp; Icon context menus.
+Keyboard navigation of menus (Alt+1 opens root menu, Alt+2 opens first child, etc)
 
+Move, copy, delete of files
 
------------------------------------------------
-version 0.0.8 and onwards
------------------------------------------------
+move, copy, delete of folder
+move, copy of folder contents
 
-limiting DaMenu expansion (preserve window width for long paths) - by shortening menu names
+Traditional List and detail views
 
-Full Folder &amp; Icon context menus.
 
---
-Detail view, how to handle icon mode switching now
-Ron &lt;Rds&gt; mentioned that Rox will be moving for ~/Choices to ~/.choices - should probably support that, or check both locations.
+Would like to do:
 
---
+limiting DaMenu expansion (preserve window width for long paths) - by shortening menu names
+AppDir Support
+Create new folder
+Ron &lt;Rds&gt; mentioned that Rox will be moving for ~/Choices to ~/.choices - should probably support that, or check both locations
+use existing thumbnails / create new thumbnails (a la ROX)
 
-int * MenuWidths; is for saving the lengths of the strings, to determine which should be shortened first. I think for 0.0.6 taht just replacing the title with single character should be good enough. 
 
-the other method - make another menu wih dirs a menus - well, am I going to do it? I dunno.
+version 0.0.9
+-----------------------------------------------
 
---
+Optional Directory tree, updated as needed
 
-   
-   
-   Generic detail view (Name, Size, Permissions, etc.) should be easy now with gnome_vfsmm; however, sorting them by this info is a bit more of a challenge. A ListView would probably be much better for this. This makes for some hey-my-scalp-is-bleeding type head-scratching problems, so a dummy label is in place for now.
-
-mime-type dependant icons, a la ROX.
-
+Package as appdir?
+ 
 ---
 
 @commit 11 -- With the ROX / Gnome-vfsmm work done, most of Ron's &lt;Rds&gt; code is gone. This would include the AppDir test. However, appdirs would never end up showing up in the main window, so this is not a huge loss as of yet. His test was for AppRun within the directory - it would require testing for that file's existance, then notifying that it is an executable and needs a unique icon.
 
 ---
 
- standard tree navigation
 
----
+-----------------------------------------------
 
-all the folder context menus...
+--version 0.1.0 (beta?)
 
----
+anouncement of usuable public release ^_^;
 
 
---version 0.1.0
+-----------------------------------------------
 
-anouncement of usuable public release ^_^;
+--version 0.1.1 and onwards
+
+Drag and drop. 
+Re-port to windows
+
+

Modified: trunk/distribute.sh
===================================================================
--- trunk/distribute.sh	2005-04-08 06:12:40 UTC (rev 49)
+++ trunk/distribute.sh	2005-04-09 01:15:34 UTC (rev 50)
@@ -1,9 +1,9 @@
 #!/bin/sh
 
 cd ..
-mkdir darimasen-0.0.6.9
-cp -R trunk/* darimasen-0.0.6.9/
-cd darimasen-0.0.6.9/
+mkdir darimasen-0.0.7
+cp -R trunk/* darimasen-0.0.7/
+cd darimasen-0.0.7/
 
 rm -Rf .svn/
 rm -Rf src/.svn/
@@ -26,4 +26,4 @@
 
 cd ..
 
-tar -cjvf darimasen-0.0.6.9.tar.bz2 darimasen-0.0.6.9/
+tar -cjvf darimasen-0.0.7.tar.bz2 darimasen-0.0.7/

Modified: trunk/src/darimasen.cpp
===================================================================
--- trunk/src/darimasen.cpp	2005-04-08 06:12:40 UTC (rev 49)
+++ trunk/src/darimasen.cpp	2005-04-09 01:15:34 UTC (rev 50)
@@ -1,8 +1,8 @@
-/* Darimasen - darimasen.cpp - Copyright (C) 2004 - 2005 Sudrien, GPL */
-
-/**********************/
-
-#include &quot;darimasen.h&quot;
+/* Darimasen - darimasen.cpp - Copyright (C) 2004 - 2005 Sudrien, GPL */
+
+/**********************/
+
+#include &quot;darimasen.h&quot;
 #include &lt;iostream&gt;
 
 /**********************/
@@ -16,30 +16,31 @@
 
   int entry = 0;
 
+MenuItemArray[position]-&gt;signal_activate().connect_notify(sigc::bind&lt;guint,Glib::ustring&gt;(sigc::mem_fun(*this,&amp;Darimasen::DarimasenMenu:: selection_reset),position,path));
 
   if( position &lt; depth || ext != &quot;&quot;){
 
     Gtk::MenuItem * subdir = Gtk::manage( new Gtk::MenuItem(menulevel[position] + &quot; &quot;));
-    MenuArray[position]-&gt;attach(*subdir, 0 ,4, entry++, entry+1);
+    MenuArray[position]-&gt;attach(*subdir, 0 ,4, entry++, entry+1);
     subdir-&gt;show();
 
           subdir-&gt;set_events(Gdk::BUTTON_RELEASE_MASK);
 
     if ( ext != &quot;&quot; ){
           subdir-&gt;signal_button_press_event().connect(
-            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
+            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::DaMenuSelect),
                  (path + menulevel[position]).substr(0, (path + menulevel[position]).length() - 1),position,true));
       }
     else {
           subdir-&gt;signal_button_press_event().connect(
-            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
+            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::DaMenuSelect),
                  (path + menulevel[position]).substr(0, (path + menulevel[position]).length() - 1),position,false));
       }
-
-    Gtk::SeparatorMenuItem * sep = Gtk::manage( new Gtk::SeparatorMenuItem());
-    MenuArray[position]-&gt;attach(*sep, 0 ,4, entry++, entry+1);
+
+    Gtk::SeparatorMenuItem * sep = Gtk::manage( new Gtk::SeparatorMenuItem());
+    MenuArray[position]-&gt;attach(*sep, 0 ,4, entry++, entry+1);
     sep-&gt;show();
     }
 
@@ -68,7 +69,7 @@
           subdir-&gt;set_events(Gdk::BUTTON_RELEASE_MASK);
 
           subdir-&gt;signal_button_press_event().connect(
-            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
+            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::DaMenuSelect),
                  (path + refFileInfo-&gt;get_name()), position,false));
 
@@ -79,34 +80,34 @@
 
 
           subdir-&gt;signal_button_press_event().connect(
-            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
+            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::DaMenuSelect),
                 (path + ext.substr(1) + slash + refFileInfo-&gt;get_name()), position,false));
 
           SubSubCount = CountSubdir(path + ext + slash + refFileInfo-&gt;get_name());
           }
 
-        if (SubSubCount != &quot;0&quot;){
-          Gtk::Label * SubSubLabel = Gtk::manage(new class Gtk::Label(SubSubCount + &quot; \342\226\272&quot;,1,0.5));
-          SubSubLabel-&gt;show();
-          Gtk::MenuItem * subsubdir = Gtk::manage( new Gtk::MenuItem(*SubSubLabel));
+        if (SubSubCount != &quot;0&quot;){
+          Gtk::Label * SubSubLabel = Gtk::manage(new class Gtk::Label(SubSubCount + &quot; \342\226\272&quot;,1,0.5));
+          SubSubLabel-&gt;show();
+          Gtk::MenuItem * subsubdir = Gtk::manage( new Gtk::MenuItem(*SubSubLabel));
           subsubdir-&gt;set_right_justified();
 
 
           subsubdir-&gt;signal_button_release_event().connect(
-            sigc::bind&lt;int, Glib::ustring, Glib::ustring&gt;(
+            sigc::bind&lt;int, Glib::ustring, Glib::ustring&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::SpecialMenuForPath),
                 position, path, ext+ slash + refFileInfo-&gt;get_name()));
-
-          MenuArray[position]-&gt;attach(*subsubdir, 3 ,4, entry, entry+1);
-          subsubdir-&gt;show();
+
+          MenuArray[position]-&gt;attach(*subsubdir, 3 ,4, entry, entry+1);
+          subsubdir-&gt;show();
           MenuArray[position]-&gt;attach(*subdir, 0 ,3, entry++, entry+1);
-          subdir-&gt;show();
-          }
-        else {
-          MenuArray[position]-&gt;attach(*subdir, 0 ,4, entry++, entry+1);
-          subdir-&gt;show();            
-          }
+          subdir-&gt;show();
+          }
+        else {
+          MenuArray[position]-&gt;attach(*subdir, 0 ,4, entry++, entry+1);
+          subdir-&gt;show();            
+          }
         }
       }
     }
@@ -123,34 +124,33 @@
        Glib::ustring path,
        Glib::ustring ext){
 
-  extended = position; 
-
- MenuItemArray[position]-&gt;remove_submenu();
- delete MenuArray[position];
- MenuArray[position] =  new DirectoryMenu(*this);
-
+  MenuItemArray[position]-&gt;remove_submenu();
+  delete MenuArray[position];
+  MenuArray[position] =  new DirectoryMenu(*this);
   MenuItemArray[position]-&gt;set_submenu(*MenuArray[position]);
   MenuForPath(position, path, ext);
-
   MenuItemArray[position]-&gt;select();
 
+  needsRebuild[position] = true;
+
   return true;
 
   }
 
 /**********************/
 
-void Darimasen::DarimasenMenu::offClick(){
-if( extended != -1 ){
-std::cout &lt;&lt; extended &lt;&lt; &quot;\n&quot;;
-  MenuItemArray[extended]-&gt;remove_submenu();
-  delete MenuArray[extended];
-  MenuArray[extended] =  new DirectoryMenu(*this);
-  MenuItemArray[extended]-&gt;set_submenu(*MenuArray[extended]);
-  MenuForPath(extended, parent-&gt;history[extended].top() , &quot;&quot;);
-extended = -1;
+void Darimasen::DarimasenMenu:: selection_reset(guint position, Glib::ustring path){
+  if ( needsRebuild[position] ){
+    MenuItemArray[position]-&gt;remove_submenu();
+    delete MenuArray[position];
+    MenuArray[position] =  new DirectoryMenu(*this);
+    MenuItemArray[position]-&gt;set_submenu(*MenuArray[position]);
+    MenuForPath(position, path, &quot;&quot;);
+    MenuItemArray[position]-&gt;select();
+
+    needsRebuild[position] = false;
+    }
 }
-}
 
 /**********************/
 
@@ -179,7 +179,7 @@
 
   return false;
 
-  //DaFileLister(); //5:45pm, 24 Dec 2004, it worked! // leave this comment    
+  //DaFileLister(); //5:45pm, 24 Dec 2004, it worked! // leave this comment    
   }
 
 /**********************/
@@ -214,7 +214,6 @@
 Darimasen::DarimasenMenu::DarimasenMenu(const Glib::ustring &amp; path, Darimasen&amp; Myparent, guint pos){
 
   depth = 0;
-  extended = -1;
 
   Glib::ustring shortpath = path; //home = getenv(&quot;HOME&quot;);
   parent = &Myparent;
@@ -231,7 +230,11 @@
     }
 
   menulevel =  new Glib::ustring[depth+1];
+  needsRebuild = new bool[depth+1];
+  for( int i=0; i&lt;=depth; i++)
+        needsRebuild[i] = false;
 
+
   startPos = 0;
   for(i = 0; shortpath.find(slash,startPos) !=  Glib::ustring::npos ; i++ ){
     menulevel[i] = shortpath.substr(startPos,shortpath.find(slash,startPos) - startPos + 1 );
@@ -280,36 +283,36 @@
     MenuArray[0]-&gt;show();
 
     Gtk::MenuItem * subdir = Gtk::manage( new Gtk::MenuItem(&quot;/ (root)&quot;));
-    MenuArray[0]-&gt;attach(*subdir, 0 ,1, 0, 1);
+    MenuArray[0]-&gt;attach(*subdir, 0 ,1, 0, 1);
     subdir-&gt;show();
 
           subdir-&gt;set_events(Gdk::BUTTON_RELEASE_MASK);
 
           subdir-&gt;signal_button_press_event().connect(
-            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
+            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::DaMenuSelect),
                  &quot;/&quot;,pos,false));
 
 
 
     Gtk::MenuItem * subdir2 = Gtk::manage( new Gtk::MenuItem(&quot;~ (home)&quot;));
-    MenuArray[0]-&gt;attach(*subdir2, 0 ,1, 1, 2);
+    MenuArray[0]-&gt;attach(*subdir2, 0 ,1, 1, 2);
     subdir2-&gt;show();
 
           subdir2-&gt;set_events(Gdk::BUTTON_RELEASE_MASK);
 
           subdir2-&gt;signal_button_press_event().connect(
-            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
+            sigc::bind&lt;Glib::ustring,guint,bool&gt;(
               sigc::mem_fun(*this, &amp;Darimasen::DarimasenMenu::DaMenuSelect),
                 getenv(&quot;HOME&quot;),pos,false));
 
-    Gtk::SeparatorMenuItem * sep = Gtk::manage( new Gtk::SeparatorMenuItem());
-    MenuArray[0]-&gt;attach(*sep, 0 ,1, 2, 3);
+    Gtk::SeparatorMenuItem * sep = Gtk::manage( new Gtk::SeparatorMenuItem());
+    MenuArray[0]-&gt;attach(*sep, 0 ,1, 2, 3);
     sep-&gt;show();
 
     Gtk::MenuItem * subdir3 = Gtk::manage( new Gtk::MenuItem(&quot;Add a location to this list&quot;));
     MenuArray[0]-&gt;attach(*subdir3, 0 ,1, 3, 4);
-    subdir3-&gt;set_sensitive(false);
+    subdir3-&gt;set_sensitive(false);
     subdir3-&gt;show();
 
 
@@ -325,7 +328,7 @@
     delete MenuArray[c];
     }
   delete menulevel;
-
+  delete needsRebuild;
   for (int i = 0; i &lt;=depth; i++){
     delete MenuArray[i];
     delete MenuItemArray[i];
@@ -339,7 +342,7 @@
 void Darimasen::fNewTab(){
     std::stack&lt;Glib::ustring&gt; empty;
     history.push_back(empty);
-
+
   history[history.size() -1].push(getenv(&quot;HOME&quot;) + slash);
   addTab(Tabber-&gt;get_n_pages());
 
@@ -354,7 +357,7 @@
 
 if( newpath.substr(newpath.length() - 1) != slash)
    newpath += slash;
-
+
   history[history.size() -1].push(newpath);
   addTab(Tabber-&gt;get_n_pages());
 
@@ -420,10 +423,10 @@
   arrangement-&gt;pack_start(*tabNum);
   arrangement-&gt;pack_end(*closeButton);
 
-  Gtk::EventBox * MainEventBox = new class Gtk::EventBox;
-
+  Gtk::EventBox * MainEventBox = new class Gtk::EventBox;
+
   Gdk::Color m_Color;
-  m_Color.set_rgb(65535, 65535, 65535);
+  m_Color.set_rgb(65535, 65535, 65535);
   MainEventBox-&gt;modify_bg(Gtk::STATE_NORMAL, m_Color);
   MainEventBox-&gt;show();
 
@@ -506,12 +509,12 @@
 /**********************/
 
 Darimasen::Darimasen(std::vector&lt;Glib::ustring&gt; paths){
-  set_title(&quot;Darimasen&quot;);
+  set_title(&quot;Darimasen&quot;);
   set_default_size(500, 330);
   set_icon_from_file( (Glib::ustring)DATADIR + (Glib::ustring)&quot;/icons/hicolor/48x48/apps/darimasen.png&quot;  );
   add(VerticalOrganizer);
   VerticalOrganizer.show();
-
+
   VerticalOrganizer.pack_start(TopBar, Gtk::PACK_SHRINK);
   TopBar.show();
 
@@ -524,9 +527,9 @@
 
   CompactMenu = new Gtk::MenuBar;
   m_Menu_File = new Gtk::Menu;
-
 
-
+
+
   CompactMenu-&gt;items().push_back( Gtk::Menu_Helpers::MenuElem(&quot;\342\226\274&quot;, *m_Menu_File) );
 
   // glade-- told me to do it....
@@ -544,10 +547,10 @@
   m_Menu_File-&gt;items().push_back( Gtk::Menu_Helpers::SeparatorElem() ) ;
 
   m_Menu_File-&gt;items().push_back( Gtk::Menu_Helpers::StockMenuElem(Gtk::Stock::QUIT,
-    sigc::mem_fun(*this, &amp;Darimasen::fQuit) ) );
-    
-  TopBar.set_show_arrow(false);
-  CompactMenuContainer-&gt;add(*CompactMenu); 
+    sigc::mem_fun(*this, &amp;Darimasen::fQuit) ) );
+    
+  TopBar.set_show_arrow(false);
+  CompactMenuContainer-&gt;add(*CompactMenu); 
   CompactMenu-&gt;show();
 
 
@@ -564,27 +567,27 @@
   TopBar.append(*sep2);
   sep2-&gt;show();
 
-  BackButton = new Gtk::ToolButton(Gtk::StockID(&quot;gtk-go-back&quot;));
-  BackButton-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fBack));
+  BackButton = new Gtk::ToolButton(Gtk::StockID(&quot;gtk-go-back&quot;));
+  BackButton-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fBack));
   TopBar.append(*BackButton);
-  BackButton-&gt;set_sensitive(false);
-  BackButton-&gt;show();
-  
-  ChangeIconMode = new Gtk::ToolButton(Gtk::StockID(&quot;gtk-convert&quot;));
-  //ChangeIconMode-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fChangeIconMode));
+  BackButton-&gt;set_sensitive(false);
+  BackButton-&gt;show();
+  
+  ChangeIconMode = new Gtk::ToolButton(Gtk::StockID(&quot;gtk-convert&quot;));
+  //ChangeIconMode-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fChangeIconMode));
   TopBar.append(*ChangeIconMode);
-  ChangeIconMode-&gt;set_sensitive(false);
-  //ChangeIconMode-&gt;show();
-   
-  ViewTree = new Gtk::ToggleToolButton(Gtk::StockID(&quot;gtk-index&quot;));
-  //ViewTree-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fViewTree));
+  ChangeIconMode-&gt;set_sensitive(false);
+  //ChangeIconMode-&gt;show();
+   
+  ViewTree = new Gtk::ToggleToolButton(Gtk::StockID(&quot;gtk-index&quot;));
+  //ViewTree-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fViewTree));
   TopBar.append(*ViewTree);
-  ViewTree-&gt;set_sensitive(false);
+  ViewTree-&gt;set_sensitive(false);
   //ViewTree -&gt; show();
 
-  NewTab = new Gtk::ToolButton(Gtk::StockID(&quot;gtk-new&quot;));
-  NewTab-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fNewTab));
-  TopBar.append(*NewTab);
+  NewTab = new Gtk::ToolButton(Gtk::StockID(&quot;gtk-new&quot;));
+  NewTab-&gt;signal_clicked().connect(sigc::mem_fun(*this, &amp;Darimasen::fNewTab));
+  TopBar.append(*NewTab);
   NewTab-&gt;show();
 
   VerticalOrganizer.add(HideTreePane);
@@ -596,11 +599,11 @@
   Tabber-&gt;signal_switch_page().connect(sigc::mem_fun(*this, &amp;Darimasen::tabberSwitched));
   Tabber-&gt;set_show_border(false);
   Tabber-&gt;show();
-
+
   HideTreePane.pack2(*Tabber, Gtk::EXPAND|Gtk::SHRINK);
    
-  Info.set_has_resize_grip();
-  Info.show();
+  Info.set_has_resize_grip();
+  Info.show();
   VerticalOrganizer.pack_start(Info, Gtk::PACK_SHRINK);
 
   show();
@@ -626,8 +629,6 @@
 
   delete Tabber;
 
- // delete sep1;
- // delete sep2;
   delete BackButton;
   delete ChangeIconMode;
   delete ViewTree;

Modified: trunk/src/darimasen.h
===================================================================
--- trunk/src/darimasen.h	2005-04-08 06:12:40 UTC (rev 49)
+++ trunk/src/darimasen.h	2005-04-09 01:15:34 UTC (rev 50)
@@ -82,17 +82,17 @@
     void MenuForPath(int, Glib::ustring , Glib::ustring); //extension
     bool SpecialMenuForPath(GdkEventButton* , int, Glib::ustring  , Glib::ustring); //extension
 
-    void offClick();
-
     Glib::ustring CountSubdir(const Glib::ustring&amp;);
     bool DaMenuSelect(GdkEventButton*, const Glib::ustring,guint,bool);
+    void selection_reset(guint, Glib::ustring);
  
+    bool * needsRebuild;
   public:
 
-    short extended;
     void signal_deactivate ();
     DarimasenMenu(const Glib::ustring&amp;, Darimasen&amp;, guint);
     ~DarimasenMenu();
+
     };
 
   class aboutDa : public Gtk::Window {
@@ -102,6 +102,8 @@
   public:
     aboutDa();
     ~aboutDa();
+
+
     };
   
   Gtk::VBox VerticalOrganizer;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000002.html">[Darimasen-svn] r49 - in trunk: . pixmaps pixmaps/scalable src
</A></li>
	<LI>Next message: <A HREF="000004.html">[Darimasen-svn] r51 - trunk/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3">[ date ]</a>
              <a href="thread.html#3">[ thread ]</a>
              <a href="subject.html#3">[ subject ]</a>
              <a href="author.html#3">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/darimasen-svn">More information about the Darimasen-svn
mailing list</a><br>
</body></html>
